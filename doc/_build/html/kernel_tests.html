

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kernel testing &mdash; LISA 2.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Kernel trace analysis" href="trace_analysis.html" />
    <link rel="prev" title="Workloads" href="workloads.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> LISA
          

          
          </a>

          
            
            
              <div class="version">
                2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="first_separator.html">==== Getting started ====</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="lisa_shell/man/man.html">LISA shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="guides_separator.html">==== Guides &amp; workflows ====</a></li>
<li class="toctree-l1"><a class="reference internal" href="transition_guide.html">Transitioning from LISA legacy</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributors_guide.html">Contributor’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows/index.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_separator.html">==== API documentation ====</a></li>
<li class="toctree-l1"><a class="reference internal" href="target.html">Target</a></li>
<li class="toctree-l1"><a class="reference internal" href="workloads.html">Workloads</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Kernel testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#available-tests">Available tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-tests">Running tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#from-the-cli">From the CLI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#from-a-python-environment">From a python environment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#writing-tests">Writing tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#concepts">Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#where-to-start">Where to start</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api">API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-lisa.tests.base">Base classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scheduler-tests">Scheduler tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#eas-tests">EAS tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#load-tracking-tests">Load tracking tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#misfit-tests">Misfit tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sanity-tests">Sanity tests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hotplug-tests">Hotplug tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cpufreq-tests">Cpufreq tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#staged-tests">Staged tests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trace_analysis.html">Kernel trace analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="energy_analysis.html">Energy analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc_utilities.html">Miscellaneous utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools_separator.html">==== Tools documentation ====</a></li>
<li class="toctree-l1"><a class="reference internal" href="bisector/index.html">Bisector Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="exekall/index.html">Exekall Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">LISA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Kernel testing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/kernel_tests.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kernel-testing">
<span id="kernel-testing-page"></span><h1>Kernel testing<a class="headerlink" href="#kernel-testing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The LISA kernel tests are mostly meant for regression testing, or for supporting
new submissions to LKML. The existing infrastructure can also be used to hack up
workloads that would allow you to poke specific areas of the kernel.</p>
<p>Tests do not <strong>have</strong> to target Arm platforms nor the task scheduler. The only
real requirement is to be able to abstract your target through
<code class="xref py py-mod docutils literal notranslate"><span class="pre">devlib</span></code>, and from there you are free to implement tests as you see fit.</p>
<dl class="simple">
<dt>They are commonly split into two steps:</dt><dd><ol class="arabic simple">
<li><p>Collect some data by doing work on the target</p></li>
<li><p>Post-process the collected data</p></li>
</ol>
</dd>
</dl>
<p>In our case, the data usually consists of
<a class="reference external" href="https://www.kernel.org/doc/Documentation/trace/ftrace.txt">Ftrace</a> traces
that we then postprocess using <a class="reference external" href="https://pythonhosted.org/TRAPpy/trappy.html#module-trappy" title="(in TRAPpy v5.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">trappy</span></code></a></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="trace_analysis.html#analysis-page"><span class="std std-ref">Kernel trace analysis</span></a></p>
</div>
</div>
<div class="section" id="available-tests">
<h2>Available tests<a class="headerlink" href="#available-tests" title="Permalink to this headline">¶</a></h2>
<p>The following tests are available. They can be used as:</p>
<blockquote>
<div><ul class="simple">
<li><p>direct execution using <code class="docutils literal notranslate"><span class="pre">lisa-test</span></code> command (<code class="docutils literal notranslate"><span class="pre">LISA</span> <span class="pre">shell</span></code>) and <code class="docutils literal notranslate"><span class="pre">exekall</span></code>
(see <a class="reference internal" href="workflows/automated_testing.html#automated-testing-page"><span class="std std-ref">Automated testing</span></a>)</p></li>
<li><p>the individual classes/methods they are composed of can be used in custom
scripts/jupyter notebooks (see ipynb/tests/synthetics_example.ipynb)</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.scheduler.sanity.CapacitySanity" title="lisa.tests.scheduler.sanity.CapacitySanity"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CapacitySanity</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.sanity.CapacitySanity.test_capacity_sanity" title="lisa.tests.scheduler.sanity.CapacitySanity.test_capacity_sanity"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_capacity_sanity</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration" title="lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnergyModelWakeMigration</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration" title="lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EnergyModelWakeMigration</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.hotplug.torture.HotplugTorture" title="lisa.tests.hotplug.torture.HotplugTorture"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HotplugTorture</span></code></a>:<a class="reference internal" href="#lisa.tests.hotplug.torture.HotplugBase.test_cpus_alive" title="lisa.tests.hotplug.torture.HotplugBase.test_cpus_alive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_cpus_alive</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.hotplug.torture.HotplugTorture" title="lisa.tests.hotplug.torture.HotplugTorture"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HotplugTorture</span></code></a>:<a class="reference internal" href="#lisa.tests.hotplug.torture.HotplugBase.test_target_alive" title="lisa.tests.hotplug.torture.HotplugBase.test_target_alive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_target_alive</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance" title="lisa.tests.scheduler.load_tracking.Invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Invariance</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.iter_invariance_items" title="lisa.tests.scheduler.load_tracking.Invariance.iter_invariance_items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_invariance_items</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_load_avg" title="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_load_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_load_avg</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance" title="lisa.tests.scheduler.load_tracking.Invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Invariance</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.iter_invariance_items" title="lisa.tests.scheduler.load_tracking.Invariance.iter_invariance_items"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_invariance_items</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg" title="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_util_avg</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance" title="lisa.tests.scheduler.load_tracking.Invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Invariance</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.test_cpu_invariance" title="lisa.tests.scheduler.load_tracking.Invariance.test_cpu_invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_cpu_invariance</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance" title="lisa.tests.scheduler.load_tracking.Invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Invariance</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.test_freq_invariance" title="lisa.tests.scheduler.load_tracking.Invariance.test_freq_invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_freq_invariance</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance" title="lisa.tests.scheduler.load_tracking.Invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Invariance</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.test_task_load_avg" title="lisa.tests.scheduler.load_tracking.Invariance.test_task_load_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_load_avg</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance" title="lisa.tests.scheduler.load_tracking.Invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Invariance</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.test_task_util_avg" title="lisa.tests.scheduler.load_tracking.Invariance.test_task_util_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_util_avg</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.OneSmallTask" title="lisa.tests.scheduler.eas_behaviour.OneSmallTask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">OneSmallTask</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.OneSmallTask" title="lisa.tests.scheduler.eas_behaviour.OneSmallTask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">OneSmallTask</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration" title="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">OneTaskCPUMigration</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration" title="lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_util_task_migration</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask" title="lisa.tests.scheduler.load_tracking.PELTTask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PELTTask</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_behaviour" title="lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_behaviour"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_load_avg_behaviour</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask" title="lisa.tests.scheduler.load_tracking.PELTTask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PELTTask</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_range" title="lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_range"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_load_avg_range</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask" title="lisa.tests.scheduler.load_tracking.PELTTask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PELTTask</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_behaviour" title="lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_behaviour"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_util_avg_behaviour</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask" title="lisa.tests.scheduler.load_tracking.PELTTask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PELTTask</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_range" title="lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_range"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_util_avg_range</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.RampDown" title="lisa.tests.scheduler.eas_behaviour.RampDown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RampDown</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.RampDown" title="lisa.tests.scheduler.eas_behaviour.RampDown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RampDown</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.RampDown.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.RampDown.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.RampUp" title="lisa.tests.scheduler.eas_behaviour.RampUp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RampUp</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.RampUp" title="lisa.tests.scheduler.eas_behaviour.RampUp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">RampUp</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.RampUp.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.RampUp.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTuneFrequencyTest" title="lisa.tests.staging.sched_android.SchedTuneFrequencyTest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SchedTuneFrequencyTest</span></code></a>:<a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTuneFrequencyTest.test_stune_frequency" title="lisa.tests.staging.sched_android.SchedTuneFrequencyTest.test_stune_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_stune_frequency</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTunePlacementTest" title="lisa.tests.staging.sched_android.SchedTunePlacementTest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SchedTunePlacementTest</span></code></a>:<a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTunePlacementTest.test_stune_task_placement" title="lisa.tests.staging.sched_android.SchedTunePlacementTest.test_stune_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_stune_task_placement</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.misfit.StaggeredFinishes" title="lisa.tests.scheduler.misfit.StaggeredFinishes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StaggeredFinishes</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.test_preempt_time" title="lisa.tests.scheduler.misfit.StaggeredFinishes.test_preempt_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_preempt_time</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.misfit.StaggeredFinishes" title="lisa.tests.scheduler.misfit.StaggeredFinishes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">StaggeredFinishes</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.test_throughput" title="lisa.tests.scheduler.misfit.StaggeredFinishes.test_throughput"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_throughput</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks" title="lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ThreeSmallTasks</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks" title="lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ThreeSmallTasks</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.TwoBigTasks" title="lisa.tests.scheduler.eas_behaviour.TwoBigTasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TwoBigTasks</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.TwoBigTasks" title="lisa.tests.scheduler.eas_behaviour.TwoBigTasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TwoBigTasks</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall" title="lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TwoBigThreeSmall</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall" title="lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TwoBigThreeSmall</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration" title="lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TwoTasksCPUMigration</span></code></a>:<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration" title="lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_util_task_migration</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.cpufreq.sanity.UserspaceSanity" title="lisa.tests.cpufreq.sanity.UserspaceSanity"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UserspaceSanity</span></code></a>:<a class="reference internal" href="#lisa.tests.cpufreq.sanity.UserspaceSanity.test_performance_sanity" title="lisa.tests.cpufreq.sanity.UserspaceSanity.test_performance_sanity"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_performance_sanity</span></code></a></p></li>
</ul>
</div>
<div class="section" id="running-tests">
<h2>Running tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h2>
<div class="section" id="from-the-cli">
<h3>From the CLI<a class="headerlink" href="#from-the-cli" title="Permalink to this headline">¶</a></h3>
<p>The shortest path to executing a test from a shell is:</p>
<ol class="arabic simple">
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">target_conf.yml</span></code> file located at the root of the repository
with the credentials to connect to the development board (see
<a class="reference internal" href="target.html#lisa.target.TargetConf" title="lisa.target.TargetConf"><code class="xref py py-class docutils literal notranslate"><span class="pre">TargetConf</span></code></a> keys for more information)</p></li>
<li><p>Run the following:</p></li>
</ol>
<blockquote>
<div><div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># To run all tests</span>
lisa-test
<span class="c1"># To list available tests</span>
lisa-test --list
<span class="c1"># To run a test matching a pattern</span>
lisa-test <span class="s1">&#39;*test_task_placement&#39;</span>
</pre></div>
</div>
</div></blockquote>
<p>More advanced workflows are described at <a class="reference internal" href="workflows/automated_testing.html#automated-testing-page"><span class="std std-ref">Automated testing</span></a>.</p>
</div>
<div class="section" id="from-a-python-environment">
<h3>From a python environment<a class="headerlink" href="#from-a-python-environment" title="Permalink to this headline">¶</a></h3>
<p>See the usage example of <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestBundle</span></code></a></p>
</div>
</div>
<div class="section" id="writing-tests">
<h2>Writing tests<a class="headerlink" href="#writing-tests" title="Permalink to this headline">¶</a></h2>
<div class="section" id="concepts">
<h3>Concepts<a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h3>
<p>Writing scheduler tests can be difficult, especially when you’re
trying to make them work without relying on custom tracepoints (which is
what you should aim for). Sometimes, a good chunk of the test code will be
about trying to get the target in an expected initial state, or preventing some
undesired mechanic from barging in. That’s why we rely on the freezer cgroup to
reduce the amount of noise introduced by the userspace, but it’s not solving all
of the issues. As such, your tests should be designed to:</p>
<ol class="loweralpha simple">
<li><p>minimize the amount of non test-related noise (e.g. freezer)</p></li>
<li><p>withstand events we can’t control (use error margins, averages…)</p></li>
</ol>
</div>
<div class="section" id="where-to-start">
<h3>Where to start<a class="headerlink" href="#where-to-start" title="Permalink to this headline">¶</a></h3>
<p>The main class of the kernel tests is <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestBundle</span></code></a>.
Have a look at its documentation for implementation and usage examples.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A simple test implementation worth looking at is
<a class="reference internal" href="#lisa.tests.scheduler.sanity.CapacitySanity" title="lisa.tests.scheduler.sanity.CapacitySanity"><code class="xref py py-class docutils literal notranslate"><span class="pre">CapacitySanity</span></code></a>.</p>
</div>
<p>The relationship between the test classes has been condensed into this diagram,
although you’ll find more details in the API documentation of these classes.</p>
<p>Implementations of <a class="reference internal" href="#lisa.tests.base.TestBundle._from_target" title="lisa.tests.base.TestBundle._from_target"><code class="xref py py-class docutils literal notranslate"><span class="pre">_from_target</span></code></a> can
execute any sort of arbitry Python code. This means that you are free to
manipulate sysfs entries, or to execute arbitray binaries on the target. The
<a class="reference internal" href="workloads.html#lisa.wlgen.workload.Workload" title="lisa.wlgen.workload.Workload"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workload</span></code></a> class has been created to
facilitate the execution of commands/binaries on the target.</p>
<p>An important daughter class of <a class="reference internal" href="workloads.html#lisa.wlgen.workload.Workload" title="lisa.wlgen.workload.Workload"><code class="xref py py-class docutils literal notranslate"><span class="pre">Workload</span></code></a>
is <a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTA" title="lisa.wlgen.rta.RTA"><code class="xref py py-class docutils literal notranslate"><span class="pre">RTA</span></code></a>, as it facilitates the creation and
execution of <a class="reference external" href="https://github.com/scheduler-tools/rt-app">rt-app</a> workloads.
It is very useful for scheduler-related tests, as it makes it easy to create
tasks with a pre-determined utilization.</p>
</div>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-lisa.tests.base">
<span id="base-classes"></span><h3>Base classes<a class="headerlink" href="#module-lisa.tests.base" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="lisa.tests.base.TestMetric">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.base.</code><code class="sig-name descname">TestMetric</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">units=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.TestMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A storage class for metrics used by tests</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – The data to store. Can be any base type or dict(TestMetric)</p></li>
<li><p><strong>units</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The data units</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="lisa.tests.base.Result">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.base.</code><code class="sig-name descname">Result</code><a class="headerlink" href="#lisa.tests.base.Result" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a></p>
<p>A classification of a test result</p>
<dl class="attribute">
<dt id="lisa.tests.base.Result.PASSED">
<code class="sig-name descname">PASSED</code><em class="property"> = 1</em><a class="headerlink" href="#lisa.tests.base.Result.PASSED" title="Permalink to this definition">¶</a></dt>
<dd><p>The test has passed</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.base.Result.FAILED">
<code class="sig-name descname">FAILED</code><em class="property"> = 2</em><a class="headerlink" href="#lisa.tests.base.Result.FAILED" title="Permalink to this definition">¶</a></dt>
<dd><p>The test has failed</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.base.Result.UNDECIDED">
<code class="sig-name descname">UNDECIDED</code><em class="property"> = 3</em><a class="headerlink" href="#lisa.tests.base.Result.UNDECIDED" title="Permalink to this definition">¶</a></dt>
<dd><p>The test data could not be used to decide between <a class="reference internal" href="#lisa.tests.base.Result.PASSED" title="lisa.tests.base.Result.PASSED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">PASSED</span></code></a> or <a class="reference internal" href="#lisa.tests.base.Result.FAILED" title="lisa.tests.base.Result.FAILED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">FAILED</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.Result.lower_name">
<em class="property">property </em><code class="sig-name descname">lower_name</code><a class="headerlink" href="#lisa.tests.base.Result.lower_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name in lower case</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.base.ResultBundleBase">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.base.</code><code class="sig-name descname">ResultBundleBase</code><a class="headerlink" href="#lisa.tests.base.ResultBundleBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base class for all result bundles.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">__init__</span></code> is not provided as some classes uses properties to
provide some of the attributes.</p>
</div>
<dl class="method">
<dt id="lisa.tests.base.ResultBundleBase.add_metric">
<code class="sig-name descname">add_metric</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">data</em>, <em class="sig-param">units=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.ResultBundleBase.add_metric" title="Permalink to this definition">¶</a></dt>
<dd><p>Lets you append several test <a class="reference internal" href="#lisa.tests.base.TestMetric" title="lisa.tests.base.TestMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestMetric</span></code></a> to the bundle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><a class="reference internal" href="#lisa.tests.base.TestMetric" title="lisa.tests.base.TestMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestMetric</span></code></a> parameters</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.ResultBundleBase.display_and_exit">
<code class="sig-name descname">display_and_exit</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#lisa.tests.base.ResultBundleBase.display_and_exit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.base.ResultBundle">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.base.</code><code class="sig-name descname">ResultBundle</code><span class="sig-paren">(</span><em class="sig-param">result</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.ResultBundle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.ResultBundleBase" title="lisa.tests.base.ResultBundleBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.ResultBundleBase</span></code></a></p>
<p>Bundle for storing test results</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>result</strong> (<a class="reference internal" href="#lisa.tests.base.Result" title="lisa.tests.base.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>) – Indicates whether the associated test passed.
It will also be used as the truth-value of a ResultBundle.</p>
</dd>
</dl>
<p><a class="reference internal" href="#lisa.tests.base.TestMetric" title="lisa.tests.base.TestMetric"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestMetric</span></code></a> can be added to an instance of this class. This can
make it easier for users of your tests to understand why a certain test
passed or failed. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_is_noon</span><span class="p">():</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">()</span><span class="o">.</span><span class="n">tm_hour</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">ResultBundle</span><span class="p">(</span><span class="n">Result</span><span class="o">.</span><span class="n">PASSED</span> <span class="k">if</span> <span class="n">now</span> <span class="o">==</span> <span class="mi">12</span> <span class="k">else</span> <span class="n">Result</span><span class="o">.</span><span class="n">FAILED</span><span class="p">)</span>
    <span class="n">res</span><span class="o">.</span><span class="n">add_metric</span><span class="p">(</span><span class="s2">&quot;current time&quot;</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">res</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">res_bundle</span> <span class="o">=</span> <span class="n">test_is_noon</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">res_bundle</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="n">FAILED</span>

<span class="c1"># At this point, the user can wonder why the test failed.</span>
<span class="c1"># Metrics are here to help, and are printed along with the result:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">res_bundle</span><span class="p">)</span>
<span class="n">FAILED</span><span class="p">:</span> <span class="n">current</span> <span class="n">time</span><span class="o">=</span><span class="mi">11</span>
</pre></div>
</div>
<dl class="method">
<dt id="lisa.tests.base.ResultBundle.from_bool">
<em class="property">classmethod </em><code class="sig-name descname">from_bool</code><span class="sig-paren">(</span><em class="sig-param">cond</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.ResultBundle.from_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternate constructor where <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> is determined from a bool</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.base.AggregatedResultBundle">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.base.</code><code class="sig-name descname">AggregatedResultBundle</code><span class="sig-paren">(</span><em class="sig-param">result_bundles</em>, <em class="sig-param">name_metric=None</em>, <em class="sig-param">result=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.AggregatedResultBundle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.ResultBundleBase" title="lisa.tests.base.ResultBundleBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.ResultBundleBase</span></code></a></p>
<p>Aggregates many <a class="reference internal" href="#lisa.tests.base.ResultBundle" title="lisa.tests.base.ResultBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultBundle</span></code></a> into one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result_bundles</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>(</em><a class="reference internal" href="#lisa.tests.base.ResultBundle" title="lisa.tests.base.ResultBundle"><em>ResultBundle</em></a><em>)</em>) – List of <a class="reference internal" href="#lisa.tests.base.ResultBundle" title="lisa.tests.base.ResultBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultBundle</span></code></a> to aggregate.</p></li>
<li><p><strong>name_metric</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Metric to use as the “name” of each result bundle.
The value of that metric will be used as top-level key in the
aggregated metrics. If not provided, the index in the
<code class="docutils literal notranslate"><span class="pre">result_bundles</span></code> list will be used.</p></li>
<li><p><strong>result</strong> (<a class="reference internal" href="#lisa.tests.base.Result" title="lisa.tests.base.Result"><em>Result</em></a>) – Optionally, force the <code class="docutils literal notranslate"><span class="pre">self.result</span></code> attribute to that
value. This is useful when the way of combining the result bundles is
not the default one, without having to make a whole new subclass.</p></li>
</ul>
</dd>
</dl>
<p>This is useful for some tests that are naturally decomposed in subtests.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Metrics of aggregated bundles will always be shown, but can be
augmented with new metrics using the usual API.</p>
</div>
<dl class="method">
<dt id="lisa.tests.base.AggregatedResultBundle.result">
<em class="property">property </em><code class="sig-name descname">result</code><a class="headerlink" href="#lisa.tests.base.AggregatedResultBundle.result" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.base.AggregatedResultBundle._">
<em class="property">property </em><code class="sig-name descname">_</code><a class="headerlink" href="#lisa.tests.base.AggregatedResultBundle._" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.base.AggregatedResultBundle.metrics">
<em class="property">property </em><code class="sig-name descname">metrics</code><a class="headerlink" href="#lisa.tests.base.AggregatedResultBundle.metrics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="lisa.tests.base.CannotCreateError">
<em class="property">exception </em><code class="sig-prename descclassname">lisa.tests.base.</code><code class="sig-name descname">CannotCreateError</code><a class="headerlink" href="#lisa.tests.base.CannotCreateError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code></a></p>
<p>Something prevented the creation of a <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestBundle</span></code></a> instance</p>
</dd></dl>

<dl class="class">
<dt id="lisa.tests.base.TestBundle">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.base.</code><code class="sig-name descname">TestBundle</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.TestBundle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="misc_utilities.html#lisa.utils.Serializable" title="lisa.utils.Serializable"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.utils.Serializable</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABC" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></a></p>
<p>A LISA test bundle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Directory in which the target execution artifacts reside.
This will also be used to dump any artifact generated in the test code.</p></li>
<li><p><strong>plat_info</strong> (<a class="reference internal" href="target.html#lisa.platforms.platinfo.PlatformInfo" title="lisa.platforms.platinfo.PlatformInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.platforms.platinfo.PlatformInfo</span></code></a>) – Various informations about the platform, that is available
to all tests.</p></li>
</ul>
</dd>
</dl>
<p>The point of a TestBundle is to bundle in a single object all of the
required data to run some test assertion (hence the name). When inheriting
from this class, you can define test methods that use this data, and return
a <a class="reference internal" href="#lisa.tests.base.ResultBundle" title="lisa.tests.base.ResultBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultBundle</span></code></a>.</p>
<p>Thanks to <a class="reference internal" href="misc_utilities.html#lisa.utils.Serializable" title="lisa.utils.Serializable"><code class="xref py py-class docutils literal notranslate"><span class="pre">Serializable</span></code></a>, instances of this class
can be serialized with minimal effort. As long as some information is stored
within an object’s member, it will be automagically handled.</p>
<p>Please refrain from monkey-patching the object in <a class="reference internal" href="#lisa.tests.base.TestBundle.from_target" title="lisa.tests.base.TestBundle.from_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_target()</span></code></a>.
Data required by the object to run test assertions should be exposed as
<code class="docutils literal notranslate"><span class="pre">__init__</span></code> parameters.</p>
<p><strong>Design notes:</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.TestBundle.from_target" title="lisa.tests.base.TestBundle.from_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_target()</span></code></a> will collect whatever artifacts are required
from a given target, and will then return a <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestBundle</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#lisa.tests.base.TestBundle.from_dir" title="lisa.tests.base.TestBundle.from_dir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_dir()</span></code></a> will use whatever artifacts are available in a
given directory (which should have been created by an earlier call
to <a class="reference internal" href="#lisa.tests.base.TestBundle.from_target" title="lisa.tests.base.TestBundle.from_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_target()</span></code></a> and then <a class="reference internal" href="#lisa.tests.base.TestBundle.to_dir" title="lisa.tests.base.TestBundle.to_dir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_dir()</span></code></a>), and will then return
a <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestBundle</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#lisa.tests.base.TestBundle.VERIFY_SERIALIZATION" title="lisa.tests.base.TestBundle.VERIFY_SERIALIZATION"><code class="xref py py-attr docutils literal notranslate"><span class="pre">VERIFY_SERIALIZATION</span></code></a> is there to ensure both above methods remain
operationnal at all times.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">res_dir</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">__init__</span></code> must be stored as an attribute
without further processing, in order to support result directory
relocation.</p></li>
<li><p>Test methods should have a return annotation for the
<a class="reference internal" href="#lisa.tests.base.ResultBundle" title="lisa.tests.base.ResultBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultBundle</span></code></a> to be picked up by the test runners.</p></li>
</ul>
</div></blockquote>
<p><strong>Implementation example</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DummyTestBundle</span><span class="p">(</span><span class="n">TestBundle</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res_dir</span><span class="p">,</span> <span class="n">plat_info</span><span class="p">,</span> <span class="n">shell_output</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DummyTestBundle</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">res_dir</span><span class="p">,</span> <span class="n">plat_info</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">shell_output</span> <span class="o">=</span> <span class="n">shell_output</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_from_target</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">plat_info</span><span class="p">,</span> <span class="n">res_dir</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">target</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;echo $((21+21))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">res_dir</span><span class="p">,</span> <span class="n">plat_info</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_output</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResultBundle</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ResultBundle</span><span class="o">.</span><span class="n">from_bool</span><span class="p">(</span>
            <span class="nb">any</span><span class="p">(</span>
                <span class="s1">&#39;42&#39;</span> <span class="ow">in</span> <span class="n">line</span>
                <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell_output</span>
            <span class="p">)</span>
        <span class="p">)</span>
</pre></div>
</div>
<p><strong>Usage example</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creating a Bundle from a live target</span>
<span class="n">bundle</span> <span class="o">=</span> <span class="n">TestBundle</span><span class="o">.</span><span class="n">from_target</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">plat_info</span><span class="p">,</span> <span class="s2">&quot;/my/res/dir&quot;</span><span class="p">)</span>
<span class="c1"># Running some test on the bundle</span>
<span class="n">res_bundle</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">test_foo</span><span class="p">()</span>

<span class="c1"># Saving the bundle on the disk</span>
<span class="n">bundle</span><span class="o">.</span><span class="n">to_dir</span><span class="p">(</span><span class="s2">&quot;/my/res/dir&quot;</span><span class="p">)</span>

<span class="c1"># Reloading the bundle from the disk</span>
<span class="n">bundle</span> <span class="o">=</span> <span class="n">TestBundle</span><span class="o">.</span><span class="n">from_dir</span><span class="p">(</span><span class="s2">&quot;/my/res/dir&quot;</span><span class="p">)</span>
<span class="c1"># The reloaded object can be used just like the original one.</span>
<span class="c1"># Keep in mind that serializing/deserializing this way will have a</span>
<span class="c1"># similar effect than a deepcopy.</span>
<span class="n">res_bundle</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">test_foo</span><span class="p">()</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="lisa.tests.base.TestBundle.VERIFY_SERIALIZATION">
<code class="sig-name descname">VERIFY_SERIALIZATION</code><em class="property"> = True</em><a class="headerlink" href="#lisa.tests.base.TestBundle.VERIFY_SERIALIZATION" title="Permalink to this definition">¶</a></dt>
<dd><p>When True, this enforces a serialization/deserialization step in
<a class="reference internal" href="#lisa.tests.base.TestBundle.from_target" title="lisa.tests.base.TestBundle.from_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_target()</span></code></a>. Although it adds an extra step (we end up creating
two <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestBundle</span></code></a> instances), it’s very valuable to ensure
<a class="reference internal" href="#lisa.tests.base.TestBundle.from_dir" title="lisa.tests.base.TestBundle.from_dir"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TestBundle.from_dir()</span></code></a> does not get broken for some particular
class.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.TestBundle._from_target">
<em class="property">abstract classmethod </em><code class="sig-name descname">_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">res_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.TestBundle._from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Internals of the target factory method.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.TestBundle.check_from_target">
<em class="property">classmethod </em><code class="sig-name descname">check_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.TestBundle.check_from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the given target can be used to create an instance of this class</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>CannotCreateError if the check fails</p>
</dd>
</dl>
<p>This method should be overriden to check your implementation requirements</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.TestBundle.can_create_from_target">
<em class="property">classmethod </em><code class="sig-name descname">can_create_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.TestBundle.can_create_from_target" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether the given target can be used to create an instance of this class</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
</dl>
<dl class="simple">
<dt><a class="reference internal" href="#lisa.tests.base.TestBundle.check_from_target" title="lisa.tests.base.TestBundle.check_from_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_from_target()</span></code></a> is used internally, so there shouldn’t be any</dt><dd><p>need to override this.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.TestBundle.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">res_dir=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.TestBundle.from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method to create a bundle using a live target</p>
<p>This is mostly boiler-plate code around <a class="reference internal" href="#lisa.tests.base.TestBundle._from_target" title="lisa.tests.base.TestBundle._from_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_from_target()</span></code></a>,
which lets us introduce common functionalities for daughter classes.
Unless you know what you are doing, you should not override this method,
but the internal <a class="reference internal" href="#lisa.tests.base.TestBundle._from_target" title="lisa.tests.base.TestBundle._from_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_from_target()</span></code></a> instead.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.TestBundle._filepath">
<em class="property">classmethod </em><code class="sig-name descname">_filepath</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.TestBundle._filepath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.base.TestBundle.from_dir">
<em class="property">classmethod </em><code class="sig-name descname">from_dir</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">update_res_dir=True</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.TestBundle.from_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around <a class="reference internal" href="misc_utilities.html#lisa.utils.Serializable.from_path" title="lisa.utils.Serializable.from_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.utils.Serializable.from_path()</span></code></a>.</p>
<p>It uses <a class="reference internal" href="#lisa.tests.base.TestBundle._filepath" title="lisa.tests.base.TestBundle._filepath"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_filepath()</span></code></a> to get the name of the serialized file to
reload.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.TestBundle.to_dir">
<code class="sig-name descname">to_dir</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.TestBundle.to_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="misc_utilities.html#lisa.utils.Serializable.to_path" title="lisa.utils.Serializable.to_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.utils.Serializable.to_path()</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.base.TestBundle._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#lisa.tests.base.TestBundle._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.base.RTATestBundleMeta">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.base.</code><code class="sig-name descname">RTATestBundleMeta</code><a class="headerlink" href="#lisa.tests.base.RTATestBundleMeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/abc.html#abc.ABCMeta" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABCMeta</span></code></a></p>
<p>Metaclass of <a class="reference internal" href="#lisa.tests.base.RTATestBundle" title="lisa.tests.base.RTATestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">RTATestBundle</span></code></a>.</p>
<p>This metaclass ensures that each class will get its own copy of
<code class="docutils literal notranslate"><span class="pre">ftrace_conf</span></code> attribute, and that the events specified in that
configuration are a superset of what is needed by methods using the
decorator <a class="reference internal" href="trace_analysis.html#lisa.trace.requires_events" title="lisa.trace.requires_events"><code class="xref py py-func docutils literal notranslate"><span class="pre">lisa.trace.requires_events()</span></code></a>. This makes sure that the
default set of events is always enough to run all defined methods, without
duplicating that information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An existing <code class="docutils literal notranslate"><span class="pre">ftrace_conf</span></code> attribute is used, with extra
detected events merged-in.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="lisa.tests.base.RTATestBundle">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.base.</code><code class="sig-name descname">RTATestBundle</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.TestBundle</span></code></a></p>
<p>Abstract Base Class for <a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTA" title="lisa.wlgen.rta.RTA"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTA</span></code></a>-powered TestBundles</p>
<p>Optionally, an <code class="docutils literal notranslate"><span class="pre">ftrace_conf</span></code> class attribute can be defined to hold
additional FTrace configuration used to record a trace while the synthetic
workload is being run. By default, the required events are extracted from
decorated test methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.base.RTATestBundle.TRACE_PATH">
<code class="sig-name descname">TRACE_PATH</code><em class="property"> = 'trace.dat'</em><a class="headerlink" href="#lisa.tests.base.RTATestBundle.TRACE_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the <code class="docutils literal notranslate"><span class="pre">trace-cmd</span></code> trace.dat file in the result directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.base.RTATestBundle.DMESG_PATH">
<code class="sig-name descname">DMESG_PATH</code><em class="property"> = 'dmesg.log'</em><a class="headerlink" href="#lisa.tests.base.RTATestBundle.DMESG_PATH" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the dmesg log in the result directory.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.base.RTATestBundle.TASK_PERIOD_MS">
<code class="sig-name descname">TASK_PERIOD_MS</code><em class="property"> = 16</em><a class="headerlink" href="#lisa.tests.base.RTATestBundle.TASK_PERIOD_MS" title="Permalink to this definition">¶</a></dt>
<dd><p>A task period you can re-use for your <a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a>
definitions.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.base.RTATestBundle.NOISE_ACCOUNTING_THRESHOLDS">
<code class="sig-name descname">NOISE_ACCOUNTING_THRESHOLDS</code><em class="property"> = {0: 100, '^sugov:\\d+$': 5}</em><a class="headerlink" href="#lisa.tests.base.RTATestBundle.NOISE_ACCOUNTING_THRESHOLDS" title="Permalink to this definition">¶</a></dt>
<dd><p>PID/comm specific tuning for <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p>
<ul class="simple">
<li><p><strong>keys</strong> can be PIDs, comms, or regexps for comms.</p></li>
<li><p><strong>values</strong> are noisiness thresholds (%), IOW below that runtime threshold
the associated task will be ignored in the noise accounting.</p></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.trace_window">
<code class="sig-name descname">trace_window</code><span class="sig-paren">(</span><em class="sig-param">trace</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle.trace_window" title="Permalink to this definition">¶</a></dt>
<dd><p>The time window to consider for this <a class="reference internal" href="#lisa.tests.base.RTATestBundle" title="lisa.tests.base.RTATestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">RTATestBundle</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a (start, stop) tuple</p>
</dd>
</dl>
<p>Since we’re using rt-app profiles, we know the name of tasks we are
interested in, so we can trim our trace scope to filter out the
setup/teardown events we don’t care about.</p>
<p>Override this method if you need a different trace trimming.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">self.trace</span></code> here will raise an <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a>
exception, to avoid entering infinite recursion.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.trace_path">
<em class="property">property </em><code class="sig-name descname">trace_path</code><a class="headerlink" href="#lisa.tests.base.RTATestBundle.trace_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the <code class="docutils literal notranslate"><span class="pre">trace-cmd</span> <span class="pre">report</span></code> trace.dat file.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.trace">
<em class="property">property </em><code class="sig-name descname">trace</code><a class="headerlink" href="#lisa.tests.base.RTATestBundle.trace" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="trace_analysis.html#lisa.trace.TraceView" title="lisa.trace.TraceView"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.trace.TraceView</span></code></a></p>
</dd>
</dl>
<p>All events specified in <code class="docutils literal notranslate"><span class="pre">ftrace_conf</span></code> are parsed from the trace,
so it is suitable for direct use in methods.</p>
<p>Having the trace as a property lets us defer the loading of the actual
trace to when it is first used. Also, this prevents it from being
serialized when calling <a class="reference internal" href="misc_utilities.html#lisa.utils.Serializable.to_path" title="lisa.utils.Serializable.to_path"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.utils.Serializable.to_path()</span></code></a> and
allows updating the underlying path before it is actually loaded to
match a different folder structure.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.get_trace">
<code class="sig-name descname">get_trace</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle.get_trace" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference internal" href="trace_analysis.html#lisa.trace.TraceView" title="lisa.trace.TraceView"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.trace.TraceView</span></code></a> cropped to fit the <code class="docutils literal notranslate"><span class="pre">rt-app</span></code>
tasks.</p>
</dd>
<dt class="field-even">Keyword arguments</dt>
<dd class="field-even"><p>forwarded to <a class="reference internal" href="trace_analysis.html#lisa.trace.Trace" title="lisa.trace.Trace"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.trace.Trace</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.rtapp_profile">
<em class="property">property </em><code class="sig-name descname">rtapp_profile</code><a class="headerlink" href="#lisa.tests.base.RTATestBundle.rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the RTapp profile based on <code class="docutils literal notranslate"><span class="pre">plat_info</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.rtapp_tasks">
<em class="property">property </em><code class="sig-name descname">rtapp_tasks</code><a class="headerlink" href="#lisa.tests.base.RTATestBundle.rtapp_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorted list of rtapp task names, as defined in <code class="docutils literal notranslate"><span class="pre">rtapp_profile</span></code>
attribute.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.cgroup_configuration">
<em class="property">property </em><code class="sig-name descname">cgroup_configuration</code><a class="headerlink" href="#lisa.tests.base.RTATestBundle.cgroup_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the cgroup configuration based on <code class="docutils literal notranslate"><span class="pre">plat_info</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.base.RTATestBundle._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#lisa.tests.base.RTATestBundle._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.base.RTATestBundle.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.base.RTATestBundle.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.test_noisy_tasks">
<code class="sig-name descname">test_noisy_tasks</code><span class="sig-paren">(</span><em class="sig-param">noise_threshold_pct=None</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.check_noisy_tasks">
<em class="property">classmethod </em><code class="sig-name descname">check_noisy_tasks</code><span class="sig-paren">(</span><em class="sig-param">noise_threshold_pct=None</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle.check_noisy_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator that applies <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a> to the trace of the
<a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestBundle</span></code></a> returned by the underlying method. The <a class="reference internal" href="#lisa.tests.base.Result" title="lisa.tests.base.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a>
will be changed to <a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Result.UNDECIDED</span></code></a> if that test fails.</p>
<p>We also expose <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a> parameters to the decorated
function.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.unscaled_utilization">
<em class="property">classmethod </em><code class="sig-name descname">unscaled_utilization</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em>, <em class="sig-param">cpu</em>, <em class="sig-param">utilization_pct</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle.unscaled_utilization" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert utilization scaled to a CPU to a ‘raw’, unscaled one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>capacity</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The CPU against which <code class="docutils literal notranslate"><span class="pre">utilization_pct`</span></code> is scaled</p></li>
<li><p><strong>utilization_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The scaled utilization in %</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.get_rtapp_profile">
<em class="property">abstract classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle.get_cgroup_configuration">
<em class="property">classmethod </em><code class="sig-name descname">get_cgroup_configuration</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle.get_cgroup_configuration" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> representing the configuration of a
particular cgroup.</p>
</dd>
</dl>
<p>This is a method you may optionally override to configure a cgroup for
the synthetic workload.</p>
<p>Example of return value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;lisa_test&#39;</span><span class="p">,</span>
    <span class="s1">&#39;controller&#39;</span><span class="p">:</span> <span class="s1">&#39;schedtune&#39;</span><span class="p">,</span>
    <span class="s1">&#39;attributes&#39;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;prefer_idle&#39;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;boost&#39;</span><span class="p">:</span> <span class="mi">50</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle._target_configure_cgroup">
<em class="property">classmethod </em><code class="sig-name descname">_target_configure_cgroup</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">cfg</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle._target_configure_cgroup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle._run_rtapp">
<em class="property">classmethod </em><code class="sig-name descname">_run_rtapp</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">res_dir</em>, <em class="sig-param">profile</em>, <em class="sig-param">ftrace_coll=None</em>, <em class="sig-param">cg_cfg=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle._run_rtapp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.base.RTATestBundle._from_target">
<em class="property">classmethod </em><code class="sig-name descname">_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">res_dir</em>, <em class="sig-param">ftrace_coll=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.base.RTATestBundle._from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Internals of the target factory method.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="scheduler-tests">
<h3>Scheduler tests<a class="headerlink" href="#scheduler-tests" title="Permalink to this headline">¶</a></h3>
<div class="section" id="eas-tests">
<h4>EAS tests<a class="headerlink" href="#eas-tests" title="Permalink to this headline">¶</a></h4>
<div class="graphviz"><img src="_images/inheritance-8d39a426cc2ac189b00d0ee9b5c765b4e57dd75d.png" alt="Inheritance diagram of lisa.tests.scheduler.eas_behaviour" usemap="#inheritance50a1f7921c" class="inheritance graphviz" /></div>
<map id="inheritance50a1f7921c" name="inheritance50a1f7921c">
<area shape="rect" id="node1" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour" target="_top" title="Abstract class for EAS behavioural testing." alt="" coords="311,153,424,179"/>
<area shape="rect" id="node3" href="#lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration" target="_top" title="One task per big CPU, alternating between two phases:" alt="" coords="472,5,675,31"/>
<area shape="rect" id="node4" href="#lisa.tests.scheduler.eas_behaviour.OneSmallTask" target="_top" title="A single &#39;small&#39; task" alt="" coords="516,55,631,80"/>
<area shape="rect" id="node6" href="#lisa.tests.scheduler.eas_behaviour.RampDown" target="_top" title="A single task whose utilization slowly ramps down" alt="" coords="525,104,622,129"/>
<area shape="rect" id="node7" href="#lisa.tests.scheduler.eas_behaviour.RampUp" target="_top" title="A single task whose utilization slowly ramps up" alt="" coords="534,153,613,179"/>
<area shape="rect" id="node8" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks" target="_top" title="Three &#39;small&#39; tasks" alt="" coords="507,203,639,228"/>
<area shape="rect" id="node9" href="#lisa.tests.scheduler.eas_behaviour.TwoBigTasks" target="_top" title="Two &#39;big&#39; tasks" alt="" coords="521,252,625,277"/>
<area shape="rect" id="node10" href="#lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall" target="_top" title="A mix of &#39;big&#39; and &#39;small&#39; tasks" alt="" coords="502,301,645,327"/>
<area shape="rect" id="node2" href="#lisa.tests.base.RTATestBundle" target="_top" title="Abstract Base Class for :class:`lisa.wlgen.rta.RTA`&#45;powered TestBundles" alt="" coords="147,153,263,179"/>
<area shape="rect" id="node5" href="#lisa.tests.base.TestBundle" target="_top" title="A LISA test bundle." alt="" coords="5,153,99,179"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<span class="target" id="module-lisa.tests.scheduler.eas_behaviour"></span><dl class="class">
<dt id="lisa.tests.scheduler.eas_behaviour.EASBehaviour">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.eas_behaviour.</code><code class="sig-name descname">EASBehaviour</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.RTATestBundle" title="lisa.tests.base.RTATestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle</span></code></a></p>
<p>Abstract class for EAS behavioural testing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nrg_model</strong> (<a class="reference internal" href="energy_analysis.html#lisa.energy_model.EnergyModel" title="lisa.energy_model.EnergyModel"><em>EnergyModel</em></a>) – The energy model of the platform the synthetic workload
was run on</p>
</dd>
</dl>
<p>This class provides <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement()</span></code></a> to validate the basic
behaviour of EAS. The implementations of this class have been developed to
verify patches supporting Arm’s big.LITTLE in the Linux scheduler. You can
see these test results being published
<a class="reference external" href="https://developer.arm.com/open-source/energy-aware-scheduling/eas-mainline-development">here</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.EASBehaviour.nrg_model">
<em class="property">property </em><code class="sig-name descname">nrg_model</code><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.nrg_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.EASBehaviour.check_from_target">
<em class="property">classmethod </em><code class="sig-name descname">check_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.check_from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the given target can be used to create an instance of this class</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>CannotCreateError if the check fails</p>
</dd>
</dl>
<p>This method should be overriden to check your implementation requirements</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.EASBehaviour.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em>, <em class="sig-param">ftrace_coll: lisa.trace.FtraceCollector = None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.scheduler.eas_behaviour.EASBehaviour<a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method to create a bundle using a live target</p>
<p>This will execute the rt-app workload described in
<a class="reference internal" href="#lisa.tests.base.RTATestBundle.get_rtapp_profile" title="lisa.tests.base.RTATestBundle.get_rtapp_profile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.get_rtapp_profile()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement">
<code class="sig-name descname">test_task_placement</code><span class="sig-paren">(</span><em class="sig-param">energy_est_threshold_pct=5</em>, <em class="sig-param">nrg_model: lisa.energy_model.EnergyModel = None</em>, <em class="sig-param">capacity_margin_pct=20</em>, <em class="sig-param">*</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that task placement was energy-efficient</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nrg_model</strong> (<a class="reference internal" href="energy_analysis.html#lisa.energy_model.EnergyModel" title="lisa.energy_model.EnergyModel"><em>EnergyModel</em></a>) – Allow using an alternate EnergyModel instead of
<code class="docutils literal notranslate"><span class="pre">nrg_model`</span></code></p></li>
<li><p><strong>energy_est_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Allowed margin for estimated vs
optimal task placement energy cost</p></li>
</ul>
</dd>
</dl>
<p>Compute optimal energy consumption (energy-optimal task placement)
and compare to energy consumption estimated from the trace.
Check that the estimated energy does not exceed the optimal energy by
more than <code class="docutils literal notranslate"><span class="pre">energy_est_threshold_pct`</span></code> percents.</p>
<p><strong>Added by</strong> <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.test_noisy_tasks()</span></code></a>:</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> will be changed to
<a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> if the environment was
too noisy:
Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack">
<code class="sig-name descname">test_slack</code><span class="sig-paren">(</span><em class="sig-param">negative_slack_allowed_pct=15</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that the RTApp workload was given enough performance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>negative_slack_allowed_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Allowed percentage of RT-app task
activations with negative slack.</p>
</dd>
</dl>
<p>Use <a class="reference internal" href="workloads.html#lisa.analysis.rta.PerfAnalysis" title="lisa.analysis.rta.PerfAnalysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.analysis.rta.PerfAnalysis</span></code></a> to find instances where the
RT-App workload wasn’t able to complete its activations (i.e. its
reported “slack” was negative). Assert that this happened less than
<code class="docutils literal notranslate"><span class="pre">negative_slack_allowed_pct</span></code> percent of the time.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.EASBehaviour.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.eas_behaviour.OneSmallTask">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.eas_behaviour.</code><code class="sig-name descname">OneSmallTask</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.OneSmallTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.eas_behaviour.EASBehaviour</span></code></a></p>
<p>A single ‘small’ task</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.OneSmallTask.task_name">
<code class="sig-name descname">task_name</code><em class="property"> = 'small'</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.OneSmallTask.task_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.OneSmallTask.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.OneSmallTask.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.OneSmallTask.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.OneSmallTask.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.eas_behaviour.</code><code class="sig-name descname">ThreeSmallTasks</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.eas_behaviour.EASBehaviour</span></code></a></p>
<p>Three ‘small’ tasks</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.task_prefix">
<code class="sig-name descname">task_prefix</code><em class="property"> = 'small'</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.task_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.test_task_placement">
<code class="sig-name descname">test_task_placement</code><span class="sig-paren">(</span><em class="sig-param">energy_est_threshold_pct=20</em>, <em class="sig-param">nrg_model: lisa.energy_model.EnergyModel = None</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em>, <em class="sig-param">capacity_margin_pct=20</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.test_task_placement" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EASBehaviour.test_task_placement()</span></code></a> but with a higher
default threshold</p>
<p>The energy estimation for this test is probably not very accurate and this
isn’t a very realistic workload. It doesn’t really matter if we pick an
“ideal” task placement for this workload, we just want to avoid using big
CPUs in a big.LITTLE system. So use a larger energy threshold that
hopefully prevents too much use of big CPUs but otherwise is flexible in
allocation of LITTLEs.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.ThreeSmallTasks.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.eas_behaviour.TwoBigTasks">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.eas_behaviour.</code><code class="sig-name descname">TwoBigTasks</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.TwoBigTasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.eas_behaviour.EASBehaviour</span></code></a></p>
<p>Two ‘big’ tasks</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.TwoBigTasks.task_prefix">
<code class="sig-name descname">task_prefix</code><em class="property"> = 'big'</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.TwoBigTasks.task_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.TwoBigTasks.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.TwoBigTasks.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.TwoBigTasks.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.TwoBigTasks.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.eas_behaviour.</code><code class="sig-name descname">TwoBigThreeSmall</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.eas_behaviour.EASBehaviour</span></code></a></p>
<p>A mix of ‘big’ and ‘small’ tasks</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall.small_prefix">
<code class="sig-name descname">small_prefix</code><em class="property"> = 'small'</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall.small_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall.big_prefix">
<code class="sig-name descname">big_prefix</code><em class="property"> = 'big'</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall.big_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.TwoBigThreeSmall.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.eas_behaviour.</code><code class="sig-name descname">EnergyModelWakeMigration</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.eas_behaviour.EASBehaviour</span></code></a></p>
<p>One task per big CPU, alternating between two phases:</p>
<ul class="simple">
<li><p>Low utilization phase (should run on a LITTLE CPU)</p></li>
<li><p>High utilization phase (should run on a big CPU)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration.task_prefix">
<code class="sig-name descname">task_prefix</code><em class="property"> = 'emwm'</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration.task_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.EnergyModelWakeMigration.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.eas_behaviour.RampUp">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.eas_behaviour.</code><code class="sig-name descname">RampUp</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.eas_behaviour.EASBehaviour</span></code></a></p>
<p>A single task whose utilization slowly ramps up</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.RampUp.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.RampUp.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.RampUp.task_name">
<code class="sig-name descname">task_name</code><em class="property"> = 'ramp_up'</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampUp.task_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.RampUp.test_task_placement">
<code class="sig-name descname">test_task_placement</code><span class="sig-paren">(</span><em class="sig-param">energy_est_threshold_pct=15</em>, <em class="sig-param">nrg_model: lisa.energy_model.EnergyModel = None</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em>, <em class="sig-param">capacity_margin_pct=20</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampUp.test_task_placement" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EASBehaviour.test_task_placement()</span></code></a> but with a higher
default threshold.</p>
<p>The main purpose of this test is to ensure that as it grows in load, a
task is migrated from LITTLE to big CPUs on a big.LITTLE system.
This migration naturally happens some time _after_ it could possibly be
done, since there must be some hysteresis to avoid a performance cost.
Therefore allow a larger energy usage threshold</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.RampUp.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampUp.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.RampUp.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampUp.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.eas_behaviour.RampDown">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.eas_behaviour.</code><code class="sig-name descname">RampDown</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampDown" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.eas_behaviour.EASBehaviour</span></code></a></p>
<p>A single task whose utilization slowly ramps down</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_slack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_slack()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.RampDown.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.RampDown.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.RampDown.task_name">
<code class="sig-name descname">task_name</code><em class="property"> = 'ramp_down'</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampDown.task_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.RampDown.test_task_placement">
<code class="sig-name descname">test_task_placement</code><span class="sig-paren">(</span><em class="sig-param">energy_est_threshold_pct=18</em>, <em class="sig-param">nrg_model: lisa.energy_model.EnergyModel = None</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em>, <em class="sig-param">capacity_margin_pct=20</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampDown.test_task_placement" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement" title="lisa.tests.scheduler.eas_behaviour.EASBehaviour.test_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EASBehaviour.test_task_placement()</span></code></a> but with a higher
default threshold</p>
<p>The main purpose of this test is to ensure that as it reduces in load, a
task is migrated from big to LITTLE CPUs on a big.LITTLE system.
This migration naturally happens some time _after_ it could possibly be
done, since there must be some hysteresis to avoid a performance cost.
Therefore allow a larger energy usage threshold</p>
<p>The number below has been found by trial and error on the platform
generally used for testing EAS (at the time of writing: Juno r0, Juno r2,
Hikey960 and TC2). It would be better to estimate the amount of energy
‘wasted’ in the hysteresis (the overutilized band) and compute a threshold
based on that. But implementing this isn’t easy because it’s very platform
dependent, so until we have a way to do that easily in test classes, let’s
stick with the arbitrary threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.eas_behaviour.RampDown.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampDown.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.eas_behaviour.RampDown.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.eas_behaviour.RampDown.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="load-tracking-tests">
<h4>Load tracking tests<a class="headerlink" href="#load-tracking-tests" title="Permalink to this headline">¶</a></h4>
<div class="graphviz"><img src="_images/inheritance-f80692e8b7f4ec1a923ed7fc2b8b455261a0fd1d.png" alt="Inheritance diagram of lisa.tests.scheduler.load_tracking" usemap="#inheritance6e1183da34" class="inheritance graphviz" /></div>
<map id="inheritance6e1183da34" name="inheritance6e1183da34">
<area shape="rect" id="node1" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase" target="_top" title="Base class for migration&#45;related load tracking tests" alt="" coords="378,4,474,21"/>
<area shape="rect" id="node8" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration" target="_top" title="Some tasks on two big CPUs, one of them migrates in its second phase." alt="" coords="506,4,617,21"/>
<area shape="rect" id="node2" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase" target="_top" title="Base class for shared functionality of load tracking tests" alt="" coords="252,37,345,54"/>
<area shape="rect" id="node6" href="#lisa.tests.scheduler.load_tracking.InvarianceItem" target="_top" title="Basic check for CPU and frequency invariant load and utilization tracking" alt="" coords="385,37,466,54"/>
<area shape="rect" id="node9" href="#lisa.tests.scheduler.load_tracking.PELTTask" target="_top" title="Basic checks for task related PELT signals behaviour" alt="" coords="399,70,453,87"/>
<area shape="rect" id="node3" href="#lisa.tests.scheduler.load_tracking.Invariance" target="_top" title="Basic check for frequency invariant load and utilization tracking" alt="" coords="150,37,211,54"/>
<area shape="rect" id="node4" href="#lisa.tests.base.TestBundle" target="_top" title="A LISA test bundle." alt="" coords="25,54,88,71"/>
<area shape="rect" id="node7" href="#lisa.tests.base.RTATestBundle" target="_top" title="Abstract Base Class for :class:`lisa.wlgen.rta.RTA`&#45;powered TestBundles" alt="" coords="142,70,220,87"/>
<area shape="rect" id="node5" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers" target="_top" title="Common bunch of helpers for load tracking tests." alt="" coords="4,12,109,29"/>
<area shape="rect" id="node10" href="#lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration" target="_top" title="Two tasks on two big CPUs, swap their CPU in the second phase" alt="" coords="650,4,764,21"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<span class="target" id="module-lisa.tests.scheduler.load_tracking"></span><dl class="data">
<dt id="lisa.tests.scheduler.load_tracking.UTIL_SCALE">
<code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">UTIL_SCALE</code><em class="property"> = 1024</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.UTIL_SCALE" title="Permalink to this definition">¶</a></dt>
<dd><p>PELT utilization values scale</p>
</dd></dl>

<dl class="data">
<dt id="lisa.tests.scheduler.load_tracking.HALF_LIFE_MS">
<code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">HALF_LIFE_MS</code><em class="property"> = 32</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.HALF_LIFE_MS" title="Permalink to this definition">¶</a></dt>
<dd><p>PELT half-life value in ms</p>
</dd></dl>

<dl class="data">
<dt id="lisa.tests.scheduler.load_tracking.UTIL_AVG_CONVERGENCE_TIME_S">
<code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">UTIL_AVG_CONVERGENCE_TIME_S</code><em class="property"> = 0.3</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.UTIL_AVG_CONVERGENCE_TIME_S" title="Permalink to this definition">¶</a></dt>
<dd><p>Time in seconds for util_avg to converge (i.e. ignored time)</p>
</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">LoadTrackingHelpers</code><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Common bunch of helpers for load tracking tests.</p>
<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.MAX_RTAPP_CALIB_DEVIATION">
<code class="sig-name descname">MAX_RTAPP_CALIB_DEVIATION</code><em class="property"> = 0.03</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.MAX_RTAPP_CALIB_DEVIATION" title="Permalink to this definition">¶</a></dt>
<dd><p>Blacklist CPUs that have a RTapp calibration value that deviates too much
from the average calib value in their capacity class.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers._get_blacklisted_cpus">
<em class="property">classmethod </em><code class="sig-name descname">_get_blacklisted_cpus</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers._get_blacklisted_cpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Consider some CPUs as blacklisted when the load would not be
proportionnal to utilization on them.</p>
<p>That happens for CPUs that are busy executing other code than the test
workload, like handling interrupts. It is detect that by looking at the
RTapp calibration value and we blacklist outliers.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.filter_capacity_classes">
<em class="property">classmethod </em><code class="sig-name descname">filter_capacity_classes</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.filter_capacity_classes" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter out capacity-classes key of <code class="docutils literal notranslate"><span class="pre">plat_info</span></code> to remove blacklisted CPUs.
.. seealso:: <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers._get_blacklisted_cpus" title="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers._get_blacklisted_cpus"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_get_blacklisted_cpus()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.get_max_capa_cpu">
<em class="property">classmethod </em><code class="sig-name descname">get_max_capa_cpu</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.get_max_capa_cpu" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A CPU with the highest capacity value that is not blacklisted.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.get_task_duty_cycle_pct">
<em class="property">classmethod </em><code class="sig-name descname">get_task_duty_cycle_pct</code><span class="sig-paren">(</span><em class="sig-param">trace</em>, <em class="sig-param">task_name</em>, <em class="sig-param">cpu</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.get_task_duty_cycle_pct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.get_task_window">
<em class="property">static </em><code class="sig-name descname">get_task_window</code><span class="sig-paren">(</span><em class="sig-param">trace</em>, <em class="sig-param">task_name</em>, <em class="sig-param">cpu=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers.get_task_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the execution window of a given task</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>trace</strong> (<a class="reference internal" href="trace_analysis.html#lisa.trace.Trace" title="lisa.trace.Trace"><em>Trace</em></a>) – The trace to look at</p></li>
<li><p><strong>task_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the task</p></li>
<li><p><strong>cpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – If specified, limit the window to times where the task was
running on that particular CPU</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tuple(int, int)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingBase">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">LoadTrackingBase</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.RTATestBundle" title="lisa.tests.base.RTATestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle</span></code></a>, <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers" title="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.load_tracking.LoadTrackingHelpers</span></code></a></p>
<p>Base class for shared functionality of load tracking tests</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingBase.cpufreq_conf">
<code class="sig-name descname">cpufreq_conf</code><em class="property"> = {'governor': 'performance'}</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase.cpufreq_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>The cpufreq configuration used while the synthetic workload is being run.
Items are arguments to <code class="xref py py-meth docutils literal notranslate"><span class="pre">devlib.cpufreq.use_governor()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingBase._from_target">
<em class="property">classmethod </em><code class="sig-name descname">_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">res_dir</em>, <em class="sig-param">ftrace_coll</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase._from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Internals of the target factory method.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingBase.get_task_sched_signal">
<code class="sig-name descname">get_task_sched_signal</code><span class="sig-paren">(</span><em class="sig-param">trace</em>, <em class="sig-param">cpu</em>, <em class="sig-param">task_name</em>, <em class="sig-param">signal</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase.get_task_sched_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> with the sched signals for the workload task</p>
<p>This examines scheduler load tracking trace events. You will need a
target kernel that includes the required events.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> with a column for each signal for
the workload task</p>
</dd>
<dt class="field-even">Required trace events</dt>
<dd class="field-even"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingBase.is_almost_equal">
<em class="property">static </em><code class="sig-name descname">is_almost_equal</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">value</em>, <em class="sig-param">allowed_delta_pct</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase.is_almost_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify that <code class="docutils literal notranslate"><span class="pre">value`</span></code> is reasonably close to <code class="docutils literal notranslate"><span class="pre">target`</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingBase._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.LoadTrackingBase.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">InvarianceItem</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">cpu</em>, <em class="sig-param">freq</em>, <em class="sig-param">freq_list</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase" title="lisa.tests.scheduler.load_tracking.LoadTrackingBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.load_tracking.LoadTrackingBase</span></code></a></p>
<p>Basic check for CPU and frequency invariant load and utilization tracking</p>
<p><strong>Expected Behaviour:</strong></p>
<p>Load tracking signals are scaled so that the workload results in
roughly the same util &amp; load values regardless of compute power of the
CPU used and its frequency.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_load_avg" title="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_load_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_load_avg()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg" title="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_util_avg()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem.task_prefix">
<code class="sig-name descname">task_prefix</code><em class="property"> = 'invariance'</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.task_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem.cpufreq_conf">
<code class="sig-name descname">cpufreq_conf</code><em class="property"> = {'governor': 'userspace'}</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.cpufreq_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem.rtapp_profile">
<em class="property">property </em><code class="sig-name descname">rtapp_profile</code><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the RTapp profile based on <code class="docutils literal notranslate"><span class="pre">plat_info</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em>, <em class="sig-param">cpu</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a specification for a rt-app workload with the specificied duty
cycle, pinned to the given CPU.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">cpu: int</em>, <em class="sig-param">freq: int</em>, <em class="sig-param">freq_list=None</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em>, <em class="sig-param">ftrace_coll: lisa.trace.FtraceCollector = None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.scheduler.load_tracking.InvarianceItem<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.from_target" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – CPU to use, or <code class="docutils literal notranslate"><span class="pre">None</span></code> to automatically choose an
appropriate set of CPUs.</p></li>
<li><p><strong>freq</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) – Frequency to run at in kHz. It is only relevant in
combination with <code class="docutils literal notranslate"><span class="pre">cpu</span></code>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><cite>res_dir</cite> is toward the end of the parameter list, unlike most
other <cite>from_target</cite> where it is the second one.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem._from_target">
<em class="property">classmethod </em><code class="sig-name descname">_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">res_dir</em>, <em class="sig-param">cpu</em>, <em class="sig-param">freq</em>, <em class="sig-param">freq_list</em>, <em class="sig-param">ftrace_coll</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem._from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Internals of the target factory method.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem.get_expected_util_avg">
<code class="sig-name descname">get_expected_util_avg</code><span class="sig-paren">(</span><em class="sig-param">trace</em>, <em class="sig-param">cpu</em>, <em class="sig-param">task_name</em>, <em class="sig-param">capacity</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.get_expected_util_avg" title="Permalink to this definition">¶</a></dt>
<dd><p>Examine trace to figure out an expected mean for util_avg</p>
<p>Assumes an RT-App workload with a single phase</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem._test_task_signal">
<code class="sig-name descname">_test_task_signal</code><span class="sig-paren">(</span><em class="sig-param">signal_name</em>, <em class="sig-param">allowed_error_pct</em>, <em class="sig-param">trace</em>, <em class="sig-param">cpu</em>, <em class="sig-param">task_name</em>, <em class="sig-param">capacity</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem._test_task_signal" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem._test_signal">
<code class="sig-name descname">_test_signal</code><span class="sig-paren">(</span><em class="sig-param">signal_name</em>, <em class="sig-param">allowed_error_pct</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem._test_signal" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg">
<code class="sig-name descname">test_task_util_avg</code><span class="sig-paren">(</span><em class="sig-param">allowed_error_pct=15</em>, <em class="sig-param">*</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that the mean of the util_avg signal matched the expected value</p>
<p>The trace is examined to estimate an expected mean value for util_avg
for each CPU’s workload by combining the known period and the average
activation length of the workload. The util_avg value is extracted from
scheduler trace events and its mean is compared with the expected value
(ignoring the first 300ms so that the signal can stabilize).</p>
<p>The test fails if the observed mean is beyond a certain error margin
from the expected one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>allowed_error_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – How much the real signal can stray from the
expected values</p>
</dd>
</dl>
<p><strong>Added by</strong> <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.test_noisy_tasks()</span></code></a>:</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> will be changed to
<a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> if the environment was
too noisy:
Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_load_avg">
<code class="sig-name descname">test_task_load_avg</code><span class="sig-paren">(</span><em class="sig-param">allowed_error_pct=15</em>, <em class="sig-param">*</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_load_avg" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that the mean of the load_avg signal matched the expected value.</p>
<p>Assuming that the system was under little stress (so the task was
RUNNING whenever it was RUNNABLE) and that the task was run with a
‘nice’ value of 0, the load_avg should be similar to the util_avg. So,
this test does the same as test_task_util_avg but for load_avg.</p>
<p>For asymmetric systems, this is only true for tasks run on the
biggest CPUs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>allowed_error_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – How much the real signal can stray from the
expected values</p>
</dd>
</dl>
<p><strong>Added by</strong> <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.test_noisy_tasks()</span></code></a>:</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> will be changed to
<a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> if the environment was
too noisy:
Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.InvarianceItem.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.load_tracking.Invariance">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">Invariance</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">invariance_items</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.TestBundle</span></code></a>, <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.LoadTrackingHelpers" title="lisa.tests.scheduler.load_tracking.LoadTrackingHelpers"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.load_tracking.LoadTrackingHelpers</span></code></a></p>
<p>Basic check for frequency invariant load and utilization tracking</p>
<p>This test runs the same workload on the most capable CPU on the system at a
cross section of available frequencies.</p>
<p>This class is mostly a wrapper around <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem" title="lisa.tests.scheduler.load_tracking.InvarianceItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvarianceItem</span></code></a>,
providing a way to build a list of those for a few frequencies, and
providing aggregated versions of the tests. Calling the tests methods on
the items directly is recommended to avoid the unavoidable loss of
information when aggregating the
<a class="reference internal" href="#lisa.tests.base.Result" title="lisa.tests.base.Result"><code class="xref py py-class docutils literal notranslate"><span class="pre">Result</span></code></a> of each item.</p>
<p><cite>invariance_items</cite> instance attribute is a list of instances of
<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem" title="lisa.tests.scheduler.load_tracking.InvarianceItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvarianceItem</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.test_cpu_invariance" title="lisa.tests.scheduler.load_tracking.Invariance.test_cpu_invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_cpu_invariance()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.test_freq_invariance" title="lisa.tests.scheduler.load_tracking.Invariance.test_freq_invariance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_freq_invariance()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.test_task_load_avg" title="lisa.tests.scheduler.load_tracking.Invariance.test_task_load_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_load_avg()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance.test_task_util_avg" title="lisa.tests.scheduler.load_tracking.Invariance.test_task_util_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_task_util_avg()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.Invariance.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance._build_invariance_items">
<em class="property">classmethod </em><code class="sig-name descname">_build_invariance_items</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">res_dir</em>, <em class="sig-param">ftrace_coll</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance._build_invariance_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem" title="lisa.tests.scheduler.load_tracking.InvarianceItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvarianceItem</span></code></a> for a subset of target’s
frequencies, for one CPU of each capacity class.</p>
<p>This is a generator function.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Iterator[<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem" title="lisa.tests.scheduler.load_tracking.InvarianceItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvarianceItem</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance.iter_invariance_items">
<code class="sig-name descname">iter_invariance_items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; lisa.tests.scheduler.load_tracking.InvarianceItem<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance.iter_invariance_items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em>, <em class="sig-param">ftrace_coll: lisa.trace.FtraceCollector = None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.scheduler.load_tracking.Invariance<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance.from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method to create a bundle using a live target</p>
<p>This is mostly boiler-plate code around <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance._from_target" title="lisa.tests.scheduler.load_tracking.Invariance._from_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_from_target()</span></code></a>,
which lets us introduce common functionalities for daughter classes.
Unless you know what you are doing, you should not override this method,
but the internal <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.Invariance._from_target" title="lisa.tests.scheduler.load_tracking.Invariance._from_target"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_from_target()</span></code></a> instead.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance._from_target">
<em class="property">classmethod </em><code class="sig-name descname">_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">res_dir</em>, <em class="sig-param">ftrace_coll</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance._from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Internals of the target factory method.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance.get_trace">
<code class="sig-name descname">get_trace</code><span class="sig-paren">(</span><em class="sig-param">cpu</em>, <em class="sig-param">freq</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance.get_trace" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The trace generated when running at a given frequency</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance.test_task_util_avg">
<code class="sig-name descname">test_task_util_avg</code><span class="sig-paren">(</span><em class="sig-param">allowed_error_pct=15</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.AggregatedResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance.test_task_util_avg" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregated version of <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg" title="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InvarianceItem.test_task_util_avg()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance.test_task_load_avg">
<code class="sig-name descname">test_task_load_avg</code><span class="sig-paren">(</span><em class="sig-param">allowed_error_pct=15</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.AggregatedResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance.test_task_load_avg" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregated version of <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_load_avg" title="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_load_avg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InvarianceItem.test_task_load_avg()</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance._test_all_freq">
<code class="sig-name descname">_test_all_freq</code><span class="sig-paren">(</span><em class="sig-param">item_test</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance._test_all_freq" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the <cite>item_test</cite> function on all instances of
<a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem" title="lisa.tests.scheduler.load_tracking.InvarianceItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvarianceItem</span></code></a> and aggregate the returned
<a class="reference internal" href="#lisa.tests.base.ResultBundle" title="lisa.tests.base.ResultBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultBundle</span></code></a> into one.</p>
<p><a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> is ignored.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance.test_cpu_invariance">
<code class="sig-name descname">test_cpu_invariance</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; lisa.tests.base.AggregatedResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance.test_cpu_invariance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that items using the max freq on each CPU is passing util avg test.</p>
<p>There could be false positives, but they are expected to be relatively
rare.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg" title="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvarianceItem.test_task_util_avg</span></code></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.Invariance.test_freq_invariance">
<code class="sig-name descname">test_freq_invariance</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance.test_freq_invariance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that at least one CPU has items passing for all tested frequencies.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg" title="lisa.tests.scheduler.load_tracking.InvarianceItem.test_task_util_avg"><code class="xref py py-class docutils literal notranslate"><span class="pre">InvarianceItem.test_task_util_avg</span></code></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.Invariance._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.Invariance._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">PELTTask</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase" title="lisa.tests.scheduler.load_tracking.LoadTrackingBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.load_tracking.LoadTrackingBase</span></code></a></p>
<p>Basic checks for task related PELT signals behaviour</p>
<p>This test runs a synthetic periodic task on a CPU in the system and
collects a trace from the target device. The util_avg values are extracted
from scheduler trace events and the behaviour of the signal is compared
against a simulated value of PELT.
This class runs the following tests:</p>
<ul class="simple">
<li><dl class="simple">
<dt>test_util_avg_range: test that util_avg’s stable range matches with the</dt><dd><p>stable range of the simulated signal. In particular, this test compares
min, max and mean values of the two signals.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>test_util_avg_behaviour: check behaviour of util_avg against the simualted</dt><dd><p>PELT signal. This test assumes that PELT is configured with 32 ms half
life time and the samples are 1024 us. Also, it assumes that the first
trace event related to the task used for testing is generated ‘after’
the task starts (hence, we compute the initial PELT value when the task
started).</p>
</dd>
</dl>
</li>
</ul>
<p><strong>Expected Behaviour:</strong></p>
<p>Simulated PELT signal and the signal extracted from the trace should have
very similar min, max and mean values in the stable range and the behaviour of
the signal should be very similar to simulated one.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_behaviour" title="lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_behaviour"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_load_avg_behaviour()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_range" title="lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_range"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_load_avg_range()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_behaviour" title="lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_behaviour"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_util_avg_behaviour()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_range" title="lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_range"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_util_avg_range()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.task_prefix">
<code class="sig-name descname">task_prefix</code><em class="property"> = 'pelt_behv'</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.task_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.TASK_PERIOD_MS">
<code class="sig-name descname">TASK_PERIOD_MS</code><em class="property"> = 16.384</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.TASK_PERIOD_MS" title="Permalink to this definition">¶</a></dt>
<dd><p>The task period must be n*1.024 due to <code class="xref py py-class docutils literal notranslate"><span class="pre">bart.pelt.Simulator</span></code> restrictions</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em>, <em class="sig-param">ftrace_coll: lisa.trace.FtraceCollector = None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.scheduler.load_tracking.PELTTask<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method to create a bundle using a live target</p>
<p>This will execute the rt-app workload described in <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.PELTTask.get_rtapp_profile" title="lisa.tests.scheduler.load_tracking.PELTTask.get_rtapp_profile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_rtapp_profile()</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.task_name">
<em class="property">property </em><code class="sig-name descname">task_name</code><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.task_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the only task this test uses</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.get_task_sched_signal">
<code class="sig-name descname">get_task_sched_signal</code><span class="sig-paren">(</span><em class="sig-param">cpu</em>, <em class="sig-param">signal</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.get_task_sched_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> with the sched signals for the workload task</p>
<p>This examines scheduler load tracking trace events. You will need a
target kernel that includes the required events.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> with a column for each signal for
the workload task</p>
</dd>
<dt class="field-even">Required trace events</dt>
<dd class="field-even"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_task</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_se</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_task</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.get_simulated_pelt">
<code class="sig-name descname">get_simulated_pelt</code><span class="sig-paren">(</span><em class="sig-param">cpu</em>, <em class="sig-param">signal_name</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.get_simulated_pelt" title="Permalink to this definition">¶</a></dt>
<dd><p>Get simulated PELT signal and the periodic task used to model it.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>tuple of
- <code class="xref py py-class docutils literal notranslate"><span class="pre">bart.sched.pelt.Simulator.Simulator</span></code> the PELT simulator object
- <code class="xref py py-class docutils literal notranslate"><span class="pre">bart.sched.pelt.PeriodicTask</span></code> simulated periodic task
- <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a> instance which reports the computed
PELT values at each PELT sample interval.</p>
</dd>
<dt class="field-even">Required trace events</dt>
<dd class="field-even"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask._test_range">
<code class="sig-name descname">_test_range</code><span class="sig-paren">(</span><em class="sig-param">signal_name</em>, <em class="sig-param">allowed_error_pct</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask._test_range" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask._plot_behaviour">
<code class="sig-name descname">_plot_behaviour</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">df</em>, <em class="sig-param">title</em>, <em class="sig-param">task_duty_cycle_pct</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask._plot_behaviour" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask._test_behaviour">
<code class="sig-name descname">_test_behaviour</code><span class="sig-paren">(</span><em class="sig-param">signal_name</em>, <em class="sig-param">error_margin_pct</em>, <em class="sig-param">allowed_error_pct</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask._test_behaviour" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_range">
<code class="sig-name descname">test_util_avg_range</code><span class="sig-paren">(</span><em class="sig-param">allowed_error_pct=1.5</em>, <em class="sig-param">*</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that the util_avg value ranges (min, max) are sane</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>allowed_error_pct</strong> – The allowed range difference</p>
</dd>
</dl>
<p><strong>Added by</strong> <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.test_noisy_tasks()</span></code></a>:</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> will be changed to
<a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> if the environment was
too noisy:
Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_range">
<code class="sig-name descname">test_load_avg_range</code><span class="sig-paren">(</span><em class="sig-param">allowed_error_pct=1.5</em>, <em class="sig-param">*</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that the load_avg value ranges (min, max) are sane</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>allowed_error_pct</strong> – The allowed range difference</p>
</dd>
</dl>
<p><strong>Added by</strong> <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.test_noisy_tasks()</span></code></a>:</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> will be changed to
<a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> if the environment was
too noisy:
Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_behaviour">
<code class="sig-name descname">test_util_avg_behaviour</code><span class="sig-paren">(</span><em class="sig-param">error_margin_pct=7</em>, <em class="sig-param">allowed_error_pct=5</em>, <em class="sig-param">*</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_util_avg_behaviour" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate every utilization signal event by comparing traced events with
simulated ones based on <code class="xref py py-class docutils literal notranslate"><span class="pre">bart.pelt.Simulator</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>error_margin_pct</strong> – How much the actual signal can stray from the
simulated signal</p></li>
<li><p><strong>allowed_error_pct</strong> – How many PELT errors (determined by
<code class="docutils literal notranslate"><span class="pre">error_margin_pct`</span></code>) are allowed</p></li>
</ul>
</dd>
</dl>
<p><strong>Added by</strong> <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.test_noisy_tasks()</span></code></a>:</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> will be changed to
<a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> if the environment was
too noisy:
Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_behaviour">
<code class="sig-name descname">test_load_avg_behaviour</code><span class="sig-paren">(</span><em class="sig-param">error_margin_pct=7</em>, <em class="sig-param">allowed_error_pct=5</em>, <em class="sig-param">*</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.test_load_avg_behaviour" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate every load signal event by comparing traced events with
simulated ones based on <code class="xref py py-class docutils literal notranslate"><span class="pre">bart.pelt.Simulator</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>error_margin_pct</strong> – How much the actual signal can stray from the
simulated signal</p></li>
<li><p><strong>allowed_error_pct</strong> – How many PELT errors (determined by
<code class="docutils literal notranslate"><span class="pre">error_margin_pct`</span></code>) are allowed</p></li>
</ul>
</dd>
</dl>
<p><strong>Added by</strong> <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.test_noisy_tasks()</span></code></a>:</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> will be changed to
<a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> if the environment was
too noisy:
Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.PELTTask.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.PELTTask.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">CPUMigrationBase</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.LoadTrackingBase" title="lisa.tests.scheduler.load_tracking.LoadTrackingBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.load_tracking.LoadTrackingBase</span></code></a></p>
<p>Base class for migration-related load tracking tests</p>
<p>The idea here is to run several rt-app tasks and to have them pinned to
a single CPU for a single phase. They can change CPUs in a new phase,
and we can then inspect the CPU utilization - it should match the
sum of the utilization of all the tasks running on it.</p>
<p><strong>Design notes:</strong></p>
<p>Since we sum up the utilization of each task, make sure not to overload the
CPU - IOW, there should always be some idle cycles.</p>
<p>The code assumes all tasks have the same number of phases, and that those
phases are all aligned.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration" title="lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_util_task_migration()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase.PHASE_DURATION_S">
<code class="sig-name descname">PHASE_DURATION_S</code><em class="property"> = 0.8999999999999999</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.PHASE_DURATION_S" title="Permalink to this definition">¶</a></dt>
<dd><p>The duration of a single phase</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase._run_rtapp">
<em class="property">classmethod </em><code class="sig-name descname">_run_rtapp</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">res_dir</em>, <em class="sig-param">profile</em>, <em class="sig-param">ftrace_coll</em>, <em class="sig-param">cgroup=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase._run_rtapp" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em>, <em class="sig-param">ftrace_coll: lisa.trace.FtraceCollector = None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.scheduler.load_tracking.CPUMigrationBase<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method to create a bundle using a live target</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase.check_from_target">
<em class="property">classmethod </em><code class="sig-name descname">check_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.check_from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the given target can be used to create an instance of this class</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>CannotCreateError if the check fails</p>
</dd>
</dl>
<p>This method should be overriden to check your implementation requirements</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase.get_expected_cpu_util">
<code class="sig-name descname">get_expected_cpu_util</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.get_expected_cpu_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the per-phase average CPU utilization expected from the rtapp profile</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dict of the shape {cpu : {phase_id : expected_util}}</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase.get_trace_cpu_util">
<code class="sig-name descname">get_trace_cpu_util</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.get_trace_cpu_util" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the per-phase average CPU utilization read from the trace</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dict of the shape {cpu : {phase_id : trace_util}}</p>
</dd>
<dt class="field-even">Required trace events</dt>
<dd class="field-even"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_cpu</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_cfs_rq</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_cpu</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration">
<code class="sig-name descname">test_util_task_migration</code><span class="sig-paren">(</span><em class="sig-param">allowed_error_pct=5</em>, <em class="sig-param">*</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that a migrated task properly propagates its utilization at the CPU level</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>allowed_error_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – How much the trace averages can stray from the
expected values</p>
</dd>
</dl>
<p><strong>Added by</strong> <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.test_noisy_tasks()</span></code></a>:</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> will be changed to
<a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> if the environment was
too noisy:
Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p>optional: (<code class="docutils literal notranslate"><span class="pre">sched_load_avg_cpu</span></code> or <code class="docutils literal notranslate"><span class="pre">sched_load_cfs_rq</span></code>) , <code class="docutils literal notranslate"><span class="pre">sched_util_est_cpu</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.CPUMigrationBase.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">OneTaskCPUMigration</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase" title="lisa.tests.scheduler.load_tracking.CPUMigrationBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.load_tracking.CPUMigrationBase</span></code></a></p>
<p>Some tasks on two big CPUs, one of them migrates in its second phase.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration" title="lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_util_task_migration()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.NR_REQUIRED_CPUS">
<code class="sig-name descname">NR_REQUIRED_CPUS</code><em class="property"> = 2</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.NR_REQUIRED_CPUS" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of CPUs of same capacity involved in the test</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.get_migration_cpus">
<em class="property">classmethod </em><code class="sig-name descname">get_migration_cpus</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.get_migration_cpus" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.NR_REQUIRED_CPUS" title="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.NR_REQUIRED_CPUS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">NR_REQUIRED_CPUS</span></code></a> CPUs of same capacity.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.check_from_target">
<em class="property">classmethod </em><code class="sig-name descname">check_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.check_from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the given target can be used to create an instance of this class</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>CannotCreateError if the check fails</p>
</dd>
</dl>
<p>This method should be overriden to check your implementation requirements</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.load_tracking.</code><code class="sig-name descname">TwoTasksCPUMigration</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.load_tracking.OneTaskCPUMigration" title="lisa.tests.scheduler.load_tracking.OneTaskCPUMigration"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.load_tracking.OneTaskCPUMigration</span></code></a></p>
<p>Two tasks on two big CPUs, swap their CPU in the second phase</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration" title="lisa.tests.scheduler.load_tracking.CPUMigrationBase.test_util_task_migration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_util_task_migration()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.load_tracking.TwoTasksCPUMigration.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="misfit-tests">
<h4>Misfit tests<a class="headerlink" href="#misfit-tests" title="Permalink to this headline">¶</a></h4>
<div class="graphviz"><img src="_images/inheritance-a847a6d90fc542513d2e54270cdcc88f76c06cf7.png" alt="Inheritance diagram of lisa.tests.scheduler.misfit" usemap="#inheritance0816c41381" class="inheritance graphviz" /></div>
<map id="inheritance0816c41381" name="inheritance0816c41381">
<area shape="rect" id="node1" href="#lisa.tests.scheduler.misfit.MisfitMigrationBase" target="_top" title="Abstract class for Misfit behavioural testing" alt="" coords="311,5,461,31"/>
<area shape="rect" id="node4" href="#lisa.tests.scheduler.misfit.StaggeredFinishes" target="_top" title="One 100% task per CPU, with staggered completion times." alt="" coords="509,5,649,31"/>
<area shape="rect" id="node2" href="#lisa.tests.base.RTATestBundle" target="_top" title="Abstract Base Class for :class:`lisa.wlgen.rta.RTA`&#45;powered TestBundles" alt="" coords="147,5,263,31"/>
<area shape="rect" id="node3" href="#lisa.tests.base.TestBundle" target="_top" title="A LISA test bundle." alt="" coords="5,5,99,31"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<span class="target" id="module-lisa.tests.scheduler.misfit"></span><dl class="class">
<dt id="lisa.tests.scheduler.misfit.MisfitMigrationBase">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.misfit.</code><code class="sig-name descname">MisfitMigrationBase</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.misfit.MisfitMigrationBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.RTATestBundle" title="lisa.tests.base.RTATestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle</span></code></a></p>
<p>Abstract class for Misfit behavioural testing</p>
<p>This class provides some helpers for features related to Misfit.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.scheduler.misfit.MisfitMigrationBase.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em>, <em class="sig-param">ftrace_coll: lisa.trace.FtraceCollector = None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.scheduler.misfit.MisfitMigrationBase<a class="headerlink" href="#lisa.tests.scheduler.misfit.MisfitMigrationBase.from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method to create a bundle using a live target</p>
<p>This will execute the rt-app workload described in
<a class="reference internal" href="#lisa.tests.base.RTATestBundle.get_rtapp_profile" title="lisa.tests.base.RTATestBundle.get_rtapp_profile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_rtapp_profile()</span></code></a></p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.misfit.MisfitMigrationBase.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.misfit.MisfitMigrationBase.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.scheduler.misfit.StaggeredFinishes">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.misfit.</code><code class="sig-name descname">StaggeredFinishes</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.misfit.StaggeredFinishes" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.scheduler.misfit.MisfitMigrationBase" title="lisa.tests.scheduler.misfit.MisfitMigrationBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.scheduler.misfit.MisfitMigrationBase</span></code></a></p>
<p>One 100% task per CPU, with staggered completion times.</p>
<p>By spawning one task per CPU on an asymmetric system, we expect the tasks
running on the higher-performance CPUs to complete first. At this point,
the misfit logic should kick in and they should pull tasks from
lower-performance CPUs.</p>
<p>The tasks have staggered completion times to prevent having several of them
completing at the same time, which can cause some unwanted noise (e.g. some
sshd or systemd activity at the end of the task).</p>
<p>The end result should look something like this on big.LITTLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span> <span class="n">are</span> <span class="n">CPU</span><span class="o">-</span><span class="n">hogging</span> <span class="n">tasks</span>
<span class="n">_</span> <span class="n">signifies</span> <span class="n">idling</span>

<span class="n">LITTLE_0</span> <span class="o">|</span> <span class="n">a</span> <span class="n">a</span> <span class="n">a</span> <span class="n">a</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span>
<span class="n">LITTLE_1</span> <span class="o">|</span> <span class="n">b</span> <span class="n">b</span> <span class="n">b</span> <span class="n">b</span> <span class="n">b</span> <span class="n">_</span> <span class="n">_</span>
<span class="o">---------|--------------</span>
  <span class="n">big_0</span>  <span class="o">|</span> <span class="n">c</span> <span class="n">c</span> <span class="n">c</span> <span class="n">c</span> <span class="n">a</span> <span class="n">a</span> <span class="n">a</span>
  <span class="n">big_1</span>  <span class="o">|</span> <span class="n">d</span> <span class="n">d</span> <span class="n">d</span> <span class="n">d</span> <span class="n">d</span> <span class="n">b</span> <span class="n">b</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.test_preempt_time" title="lisa.tests.scheduler.misfit.StaggeredFinishes.test_preempt_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_preempt_time()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.test_throughput" title="lisa.tests.scheduler.misfit.StaggeredFinishes.test_throughput"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_throughput()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.scheduler.misfit.StaggeredFinishes.task_prefix">
<code class="sig-name descname">task_prefix</code><em class="property"> = 'misfit'</em><a class="headerlink" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.task_prefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.misfit.StaggeredFinishes.PIN_DELAY_S">
<code class="sig-name descname">PIN_DELAY_S</code><em class="property"> = 0.001</em><a class="headerlink" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.PIN_DELAY_S" title="Permalink to this definition">¶</a></dt>
<dd><p>How long the tasks will be pinned to their “starting” CPU. Doesn’t have
to be long (we just have to ensure they spawn there), so arbitrary value</p>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.misfit.StaggeredFinishes.IDLING_DELAY_S">
<code class="sig-name descname">IDLING_DELAY_S</code><em class="property"> = 1</em><a class="headerlink" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.IDLING_DELAY_S" title="Permalink to this definition">¶</a></dt>
<dd><p>A somewhat arbitray delay - long enough to ensure
rq-&gt;avg_idle &gt; sysctl_sched_migration_cost</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.misfit.StaggeredFinishes.check_from_target">
<em class="property">classmethod </em><code class="sig-name descname">check_from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.check_from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the given target can be used to create an instance of this class</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p>CannotCreateError if the check fails</p>
</dd>
</dl>
<p>This method should be overriden to check your implementation requirements</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.misfit.StaggeredFinishes.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.misfit.StaggeredFinishes.test_preempt_time">
<code class="sig-name descname">test_preempt_time</code><span class="sig-paren">(</span><em class="sig-param">allowed_preempt_pct=1</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.test_preempt_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that tasks are not being preempted too much</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.scheduler.misfit.StaggeredFinishes.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.misfit.StaggeredFinishes.test_throughput">
<code class="sig-name descname">test_throughput</code><span class="sig-paren">(</span><em class="sig-param">allowed_idle_time_s=None</em>, <em class="sig-param">*</em>, <em class="sig-param">noise_threshold_pct=1</em>, <em class="sig-param">noise_threshold_ms=None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.misfit.StaggeredFinishes.test_throughput" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that big CPUs are not idle when there are misfit tasks to upmigrate</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>allowed_idle_time_s</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – <p>How much time should be allowed between a
big CPU going idle and a misfit task ending on that CPU. In theory
a newidle balance should lead to a null delay, but in practice
there’s a tiny one, so don’t set that to 0 and expect the test to
pass.</p>
<p>Furthermore, we’re not always guaranteed to get a newidle pull, so
allow time for a regular load balance to happen.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">None</span></code>, this defaults to (1ms x number_of_cpus) to mimic the
default balance_interval (balance_interval = sd_weight), see
kernel/sched/topology.c:sd_init().</p>
</p>
</dd>
</dl>
<p><strong>Added by</strong> <a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle.test_noisy_tasks()</span></code></a>:</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">ResultBundle.result</span></code> will be changed to
<a class="reference internal" href="#lisa.tests.base.Result.UNDECIDED" title="lisa.tests.base.Result.UNDECIDED"><code class="xref py py-attr docutils literal notranslate"><span class="pre">UNDECIDED</span></code></a> if the environment was
too noisy:
Test that no non-rtapp (“noisy”) task ran for longer than the specified thresholds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>noise_threshold_pct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in
percentage of the total rt-app execution time</p></li>
<li><p><strong>noise_threshold_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – The maximum allowed runtime for noisy tasks in ms</p></li>
</ul>
</dd>
</dl>
<p>If both are specified, the smallest threshold (in seconds) will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cpu_idle</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sanity-tests">
<h4>Sanity tests<a class="headerlink" href="#sanity-tests" title="Permalink to this headline">¶</a></h4>
<div class="graphviz"><img src="_images/inheritance-6b120d041bbeea3a2487f5013c286c626f1bccf7.png" alt="Inheritance diagram of lisa.tests.scheduler.sanity" usemap="#inheritanced6ef772258" class="inheritance graphviz" /></div>
<map id="inheritanced6ef772258" name="inheritanced6ef772258">
<area shape="rect" id="node1" href="#lisa.tests.scheduler.sanity.CapacitySanity" target="_top" title="A class for making sure capacity values make sense on a given target" alt="" coords="147,5,267,31"/>
<area shape="rect" id="node2" href="#lisa.tests.base.TestBundle" target="_top" title="A LISA test bundle." alt="" coords="5,5,99,31"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<span class="target" id="module-lisa.tests.scheduler.sanity"></span><dl class="class">
<dt id="lisa.tests.scheduler.sanity.CapacitySanity">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.scheduler.sanity.</code><code class="sig-name descname">CapacitySanity</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">capacity_work</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.scheduler.sanity.CapacitySanity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.TestBundle</span></code></a></p>
<p>A class for making sure capacity values make sense on a given target</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>capacity_work</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A description of the amount of work done on the
target, per capacity value ({capacity : work})</p>
</dd>
<dt class="field-even">Test methods</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.scheduler.sanity.CapacitySanity.test_capacity_sanity" title="lisa.tests.scheduler.sanity.CapacitySanity.test_capacity_sanity"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_capacity_sanity()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.scheduler.sanity.CapacitySanity.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.scheduler.sanity.CapacitySanity<a class="headerlink" href="#lisa.tests.scheduler.sanity.CapacitySanity.from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method to create a bundle using a live target</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.scheduler.sanity.CapacitySanity.test_capacity_sanity">
<code class="sig-name descname">test_capacity_sanity</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.scheduler.sanity.CapacitySanity.test_capacity_sanity" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that higher CPU capacity means more work done</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="hotplug-tests">
<h3>Hotplug tests<a class="headerlink" href="#hotplug-tests" title="Permalink to this headline">¶</a></h3>
<div class="graphviz"><img src="_images/inheritance-d3741f61b0f31fcb993c37cd01ccf62be9ea5e66.png" alt="Inheritance diagram of lisa.tests.hotplug.torture" usemap="#inheritanceeed4612b10" class="inheritance graphviz" /></div>
<map id="inheritanceeed4612b10" name="inheritanceeed4612b10">
<area shape="rect" id="node1" href="#lisa.tests.hotplug.torture.CPUHPSequenceError" target="_top" title="CPUHPSequenceError" alt="" coords="5,55,167,80"/>
<area shape="rect" id="node2" href="#lisa.tests.hotplug.torture.HotplugBase" target="_top" title="HotplugBase" alt="" coords="215,5,320,31"/>
<area shape="rect" id="node4" href="#lisa.tests.hotplug.torture.HotplugTorture" target="_top" title="HotplugTorture" alt="" coords="368,5,487,31"/>
<area shape="rect" id="node3" href="#lisa.tests.base.TestBundle" target="_top" title="A LISA test bundle." alt="" coords="39,5,133,31"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<span class="target" id="module-lisa.tests.hotplug.torture"></span><dl class="exception">
<dt id="lisa.tests.hotplug.torture.CPUHPSequenceError">
<em class="property">exception </em><code class="sig-prename descclassname">lisa.tests.hotplug.torture.</code><code class="sig-name descname">CPUHPSequenceError</code><a class="headerlink" href="#lisa.tests.hotplug.torture.CPUHPSequenceError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
</dd></dl>

<dl class="class">
<dt id="lisa.tests.hotplug.torture.HotplugBase">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.hotplug.torture.</code><code class="sig-name descname">HotplugBase</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em>, <em class="sig-param">target_alive</em>, <em class="sig-param">hotpluggable_cpus</em>, <em class="sig-param">live_cpus</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.hotplug.torture.HotplugBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.TestBundle</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.hotplug.torture.HotplugBase.test_cpus_alive" title="lisa.tests.hotplug.torture.HotplugBase.test_cpus_alive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_cpus_alive()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.hotplug.torture.HotplugBase.test_target_alive" title="lisa.tests.hotplug.torture.HotplugBase.test_target_alive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_target_alive()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.hotplug.torture.HotplugBase.cpuhp_seq">
<em class="property">abstract classmethod </em><code class="sig-name descname">cpuhp_seq</code><span class="sig-paren">(</span><em class="sig-param">nr_operations</em>, <em class="sig-param">hotpluggable_cpus</em>, <em class="sig-param">max_cpus_off</em>, <em class="sig-param">random_gen</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.hotplug.torture.HotplugBase.cpuhp_seq" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield a consistent random sequence of CPU hotplug operations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nr_operations</strong> – Number of operations in the sequence</p></li>
<li><p><strong>max_cpus_off</strong> – Max number of CPUs plugged-off</p></li>
<li><p><strong>random_gen</strong> (<code class="docutils literal notranslate"><span class="pre">random.Random</span></code>) – A random generator instance</p></li>
</ul>
</dd>
</dl>
<p>“Consistent” means that a CPU will be plugged-in only if it was
plugged-off before (and vice versa). Moreover the state of the CPUs
once the sequence has completed should the same as it was before.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.hotplug.torture.HotplugBase.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em>, <em class="sig-param">seed=None</em>, <em class="sig-param">nr_operations=100</em>, <em class="sig-param">sleep_min_ms=10</em>, <em class="sig-param">sleep_max_ms=100</em>, <em class="sig-param">max_cpus_off=9223372036854775807</em><span class="sig-paren">)</span> &#x2192; lisa.tests.hotplug.torture.HotplugBase<a class="headerlink" href="#lisa.tests.hotplug.torture.HotplugBase.from_target" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Seed of the RNG used to create the hotplug sequences</p></li>
<li><p><strong>nr_operations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of operations in the sequence</p></li>
<li><p><strong>sleep_min_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Minimum sleep duration between hotplug operations</p></li>
<li><p><strong>sleep_max_ms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Maximum sleep duration between hotplug operations
(0 would lead to no sleep)</p></li>
<li><p><strong>max_cpus_off</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Maximum number of CPUs hotplugged out at any given
moment</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.hotplug.torture.HotplugBase.test_target_alive">
<code class="sig-name descname">test_target_alive</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.hotplug.torture.HotplugBase.test_target_alive" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that the hotplugs didn’t leave the target in an unusable state</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.hotplug.torture.HotplugBase.test_cpus_alive">
<code class="sig-name descname">test_cpus_alive</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.hotplug.torture.HotplugBase.test_cpus_alive" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that all CPUs came back online after the hotplug operations</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.hotplug.torture.HotplugTorture">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.hotplug.torture.</code><code class="sig-name descname">HotplugTorture</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em>, <em class="sig-param">target_alive</em>, <em class="sig-param">hotpluggable_cpus</em>, <em class="sig-param">live_cpus</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.hotplug.torture.HotplugTorture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.hotplug.torture.HotplugBase" title="lisa.tests.hotplug.torture.HotplugBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.hotplug.torture.HotplugBase</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.hotplug.torture.HotplugBase.test_cpus_alive" title="lisa.tests.hotplug.torture.HotplugBase.test_cpus_alive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_cpus_alive()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.hotplug.torture.HotplugBase.test_target_alive" title="lisa.tests.hotplug.torture.HotplugBase.test_target_alive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_target_alive()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.hotplug.torture.HotplugTorture.cpuhp_seq">
<em class="property">classmethod </em><code class="sig-name descname">cpuhp_seq</code><span class="sig-paren">(</span><em class="sig-param">nr_operations</em>, <em class="sig-param">hotpluggable_cpus</em>, <em class="sig-param">max_cpus_off</em>, <em class="sig-param">random_gen</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.hotplug.torture.HotplugTorture.cpuhp_seq" title="Permalink to this definition">¶</a></dt>
<dd><p>FIXME: is that actually still true ?
The actual length of the sequence might differ from the requested one
by 1 because it’s easier to implement and it shouldn’t be an issue for
most test cases.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cpufreq-tests">
<h3>Cpufreq tests<a class="headerlink" href="#cpufreq-tests" title="Permalink to this headline">¶</a></h3>
<div class="graphviz"><img src="_images/inheritance-0013597a3f41f4d84ff7e8271896d48ec8c08bc4.png" alt="Inheritance diagram of lisa.tests.cpufreq.sanity" usemap="#inheritance2faf1eb476" class="inheritance graphviz" /></div>
<map id="inheritance2faf1eb476" name="inheritance2faf1eb476">
<area shape="rect" id="node1" href="#lisa.tests.base.TestBundle" target="_top" title="A LISA test bundle." alt="" coords="5,5,99,31"/>
<area shape="rect" id="node2" href="#lisa.tests.cpufreq.sanity.UserspaceSanity" target="_top" title="A class for making sure the userspace governor behaves sanely" alt="" coords="147,5,277,31"/>
</map><div class="line-block">
<div class="line"><br /></div>
</div>
<span class="target" id="module-lisa.tests.cpufreq.sanity"></span><dl class="class">
<dt id="lisa.tests.cpufreq.sanity.UserspaceSanity">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.cpufreq.sanity.</code><code class="sig-name descname">UserspaceSanity</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">cpu_work</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.cpufreq.sanity.UserspaceSanity" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.TestBundle</span></code></a></p>
<p>A class for making sure the userspace governor behaves sanely</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cpu_work</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A description of the amount of work done on one CPU of
each frequency domain ({cpu : {freq : work}}</p>
</dd>
<dt class="field-even">Test methods</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.cpufreq.sanity.UserspaceSanity.test_performance_sanity" title="lisa.tests.cpufreq.sanity.UserspaceSanity.test_performance_sanity"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_performance_sanity()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.cpufreq.sanity.UserspaceSanity.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em>, <em class="sig-param">freq_count_limit=5</em><span class="sig-paren">)</span> &#x2192; lisa.tests.cpufreq.sanity.UserspaceSanity<a class="headerlink" href="#lisa.tests.cpufreq.sanity.UserspaceSanity.from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory method to create a bundle using a live target</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>freq_count_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The maximum amount of frequencies to test</p>
</dd>
</dl>
<p>This will run Sysbench at different frequencies using the userspace
governor</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.cpufreq.sanity.UserspaceSanity.test_performance_sanity">
<code class="sig-name descname">test_performance_sanity</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.cpufreq.sanity.UserspaceSanity.test_performance_sanity" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that higher CPU frequency leads to more work done</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="staged-tests">
<h3>Staged tests<a class="headerlink" href="#staged-tests" title="Permalink to this headline">¶</a></h3>
<p>Those are tests that have been merged into LISA but whose behaviour are being
actively evaluated.</p>
<span class="target" id="module-lisa.tests.staging.sched_android"></span><dl class="class">
<dt id="lisa.tests.staging.sched_android.SchedTuneItemBase">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.staging.sched_android.</code><code class="sig-name descname">SchedTuneItemBase</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">boost</em>, <em class="sig-param">prefer_idle</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneItemBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.RTATestBundle" title="lisa.tests.base.RTATestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.RTATestBundle</span></code></a></p>
<p>Abstract class enabling rtapp execution in a schedtune group</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>boost</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The boost level to set for the cgroup</p></li>
<li><p><strong>prefer_idle</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – The prefer_idle flag to set for the cgroup</p></li>
</ul>
</dd>
<dt class="field-even">Test methods</dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTuneItemBase.cgroup_configuration">
<em class="property">property </em><code class="sig-name descname">cgroup_configuration</code><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneItemBase.cgroup_configuration" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the cgroup configuration based on <code class="docutils literal notranslate"><span class="pre">plat_info</span></code></p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTuneItemBase.get_cgroup_configuration">
<em class="property">classmethod </em><code class="sig-name descname">get_cgroup_configuration</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em>, <em class="sig-param">boost</em>, <em class="sig-param">prefer_idle</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneItemBase.get_cgroup_configuration" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> representing the configuration of a
particular cgroup.</p>
</dd>
</dl>
<p>This is a method you may optionally override to configure a cgroup for
the synthetic workload.</p>
<p>Example of return value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;lisa_test&#39;</span><span class="p">,</span>
    <span class="s1">&#39;controller&#39;</span><span class="p">:</span> <span class="s1">&#39;schedtune&#39;</span><span class="p">,</span>
    <span class="s1">&#39;attributes&#39;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;prefer_idle&#39;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;boost&#39;</span><span class="p">:</span> <span class="mi">50</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTuneItemBase.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">boost</em>, <em class="sig-param">prefer_idle</em>, <em class="sig-param">res_dir=None</em>, <em class="sig-param">ftrace_coll=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneItemBase.from_target" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><cite>res_dir</cite> is at the end of the parameter list, unlike most
other <cite>from_target</cite> where it is the second one.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.staging.sched_android.SchedTuneItemBase.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneItemBase.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.staging.sched_android.SchedTuneBase">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.staging.sched_android.</code><code class="sig-name descname">SchedTuneBase</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">test_bundles</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.base.TestBundle" title="lisa.tests.base.TestBundle"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.base.TestBundle</span></code></a></p>
<p>Abstract class enabling the aggregation of <code class="docutils literal notranslate"><span class="pre">SchedTuneItemBase</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>test_bundles</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – a list of test bundles generated by
multiple <code class="docutils literal notranslate"><span class="pre">SchedTuneItemBase</span></code> instances</p>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTuneBase.from_target">
<em class="property">classmethod </em><code class="sig-name descname">from_target</code><span class="sig-paren">(</span><em class="sig-param">target: lisa.target.Target</em>, <em class="sig-param">res_dir: lisa.utils.ArtifactPath = None</em>, <em class="sig-param">ftrace_coll: lisa.trace.FtraceCollector = None</em><span class="sig-paren">)</span> &#x2192; lisa.tests.staging.sched_android.SchedTuneBase<a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneBase.from_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a SchedTuneBase bundle from the target.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.staging.sched_android.SchedTuneFreqItem">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.staging.sched_android.</code><code class="sig-name descname">SchedTuneFreqItem</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">boost</em>, <em class="sig-param">prefer_idle</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneFreqItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTuneItemBase" title="lisa.tests.staging.sched_android.SchedTuneItemBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.staging.sched_android.SchedTuneItemBase</span></code></a></p>
<p>Runs a tiny RT rtapp task pinned to a big CPU at a given boost level and
checks the frequency selection was performed accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTuneFreqItem.test_stune_frequency" title="lisa.tests.staging.sched_android.SchedTuneFreqItem.test_stune_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_stune_frequency()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTuneFreqItem.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneFreqItem.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTuneFreqItem.trace_window">
<code class="sig-name descname">trace_window</code><span class="sig-paren">(</span><em class="sig-param">trace</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneFreqItem.trace_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the boundaries of the trace window to <code class="docutils literal notranslate"><span class="pre">cpu_frequency</span></code> events
before/after the task’s start/end time</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cpu_frequency</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTuneFreqItem.test_stune_frequency">
<code class="sig-name descname">test_stune_frequency</code><span class="sig-paren">(</span><em class="sig-param">freq_margin_pct=10</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneFreqItem.test_stune_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that frequency selection followed the boost</p>
<dl class="field-list simple">
<dt class="field-odd">Param</dt>
<dd class="field-odd"><p>freq_margin_pct: Allowed margin between estimated and measured
average frequencies</p>
</dd>
</dl>
<p>Compute the expected frequency given the boost level and compare to the
real average frequency from the trace.
Check that the difference between expected and measured frequencies is
no larger than <code class="docutils literal notranslate"><span class="pre">freq_margin_pct</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cpu_frequency</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.staging.sched_android.SchedTuneFreqItem.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneFreqItem.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.staging.sched_android.SchedTuneFrequencyTest">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.staging.sched_android.</code><code class="sig-name descname">SchedTuneFrequencyTest</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">test_bundles</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneFrequencyTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTuneBase" title="lisa.tests.staging.sched_android.SchedTuneBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.staging.sched_android.SchedTuneBase</span></code></a></p>
<p>Runs multiple <code class="docutils literal notranslate"><span class="pre">SchedTuneFreqItem</span></code> tests at various boost levels ranging
from 20% to 100%, then checks all succedeed.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTuneFrequencyTest.test_stune_frequency" title="lisa.tests.staging.sched_android.SchedTuneFrequencyTest.test_stune_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_stune_frequency()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.staging.sched_android.SchedTuneFrequencyTest.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneFrequencyTest.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTuneFrequencyTest.test_stune_frequency">
<code class="sig-name descname">test_stune_frequency</code><span class="sig-paren">(</span><em class="sig-param">freq_margin_pct=10</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.AggregatedResultBundle<a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTuneFrequencyTest.test_stune_frequency" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTuneFreqItem.test_stune_frequency" title="lisa.tests.staging.sched_android.SchedTuneFreqItem.test_stune_frequency"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SchedTuneFreqItem.test_stune_frequency()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.staging.sched_android.SchedTunePlacementItem">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.staging.sched_android.</code><code class="sig-name descname">SchedTunePlacementItem</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">boost</em>, <em class="sig-param">prefer_idle</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTunePlacementItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTuneItemBase" title="lisa.tests.staging.sched_android.SchedTuneItemBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.staging.sched_android.SchedTuneItemBase</span></code></a></p>
<p>Runs a tiny RT-App task marked ‘prefer_idle’ at a given boost level and
tests if it was placed on big-enough CPUs.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.base.RTATestBundle.test_noisy_tasks" title="lisa.tests.base.RTATestBundle.test_noisy_tasks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_noisy_tasks()</span></code></a></p></li>
<li><p><a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTunePlacementItem.test_stune_task_placement" title="lisa.tests.staging.sched_android.SchedTunePlacementItem.test_stune_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_stune_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTunePlacementItem.get_rtapp_profile">
<em class="property">classmethod </em><code class="sig-name descname">get_rtapp_profile</code><span class="sig-paren">(</span><em class="sig-param">plat_info</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTunePlacementItem.get_rtapp_profile" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> with task names as keys and
<a class="reference internal" href="workloads.html#lisa.wlgen.rta.RTATask" title="lisa.wlgen.rta.RTATask"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.wlgen.rta.RTATask</span></code></a> as values</p>
</dd>
</dl>
<p>This is the method you want to override to specify what is your
synthetic workload.</p>
</dd></dl>

<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTunePlacementItem.test_stune_task_placement">
<code class="sig-name descname">test_stune_task_placement</code><span class="sig-paren">(</span><em class="sig-param">bad_cpu_margin_pct=10</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.ResultBundle<a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTunePlacementItem.test_stune_task_placement" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that the task placement satisfied the boost requirement</p>
<p>Check that top-app tasks spend no more than <code class="docutils literal notranslate"><span class="pre">bad_cpu_margin_pct</span></code> of
their time on CPUs that don’t have enough capacity to serve their
boost.</p>
<dl class="field-list simple">
<dt class="field-odd">Required trace events</dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sched_switch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sched_wakeup</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="lisa.tests.staging.sched_android.SchedTunePlacementItem.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTunePlacementItem.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="lisa.tests.staging.sched_android.SchedTunePlacementTest">
<em class="property">class </em><code class="sig-prename descclassname">lisa.tests.staging.sched_android.</code><code class="sig-name descname">SchedTunePlacementTest</code><span class="sig-paren">(</span><em class="sig-param">res_dir</em>, <em class="sig-param">plat_info</em>, <em class="sig-param">test_bundles</em><span class="sig-paren">)</span><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTunePlacementTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTuneBase" title="lisa.tests.staging.sched_android.SchedTuneBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">lisa.tests.staging.sched_android.SchedTuneBase</span></code></a></p>
<p>Runs multiple <code class="docutils literal notranslate"><span class="pre">SchedTunePlacementItem</span></code> tests with prefer_idle set and
typical top-app boost levels, then checks all succedeed.</p>
<dl class="field-list simple">
<dt class="field-odd">Test methods</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTunePlacementTest.test_stune_task_placement" title="lisa.tests.staging.sched_android.SchedTunePlacementTest.test_stune_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">test_stune_task_placement()</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="attribute">
<dt id="lisa.tests.staging.sched_android.SchedTunePlacementTest.ftrace_conf">
<code class="sig-name descname">ftrace_conf</code><em class="property"> = &lt;lisa.trace.FtraceConf object&gt;</em><a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTunePlacementTest.ftrace_conf" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="lisa.tests.staging.sched_android.SchedTunePlacementTest.test_stune_task_placement">
<code class="sig-name descname">test_stune_task_placement</code><span class="sig-paren">(</span><em class="sig-param">margin_pct=10</em><span class="sig-paren">)</span> &#x2192; lisa.tests.base.AggregatedResultBundle<a class="headerlink" href="#lisa.tests.staging.sched_android.SchedTunePlacementTest.test_stune_task_placement" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#lisa.tests.staging.sched_android.SchedTunePlacementItem.test_stune_task_placement" title="lisa.tests.staging.sched_android.SchedTunePlacementItem.test_stune_task_placement"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SchedTunePlacementItem.test_stune_task_placement()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="trace_analysis.html" class="btn btn-neutral float-right" title="Kernel trace analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="workloads.html" class="btn btn-neutral float-left" title="Workloads" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, ARM-Software

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>